<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Vueå“åº”å¼åŸç†è§£æ]]></title>
    <url>%2F2019%2F12%2F22%2FVue%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[Vueå“åº”å¼å‰è¨€æ•°æ®å“åº”å¼ç³»ç»Ÿæ˜¯Vueæœ€æ˜¾è‘—çš„ä¸€ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬é€šè¿‡Vueå®˜æ–¹æ–‡æ¡£å›é¡¾ä¸€ä¸‹ã€‚ æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„ JavaScript å¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ç›´æ¥ï¼Œä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥é¿å¼€ä¸€äº›å¸¸è§çš„é—®é¢˜ã€‚ ç°åœ¨æ˜¯æ—¶å€™æ·±å…¥ä¸€ä¸‹äº†ï¼æœ¬æ–‡é’ˆå¯¹å“åº”å¼ç³»ç»Ÿçš„åŸç†è¿›è¡Œä¸€ä¸ªè¯¦ç»†ä»‹ç»ã€‚ å“åº”å¼æ˜¯ä»€ä¹ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ 12345678910111213141516&lt;div id="app"&gt; &lt;p&gt;&#123;&#123;color&#125;&#125;&lt;/p&gt; &lt;button @click="changeColor"&gt;change color!&lt;/button&gt;&lt;/div&gt;new Vue(&#123; el: '#app', data() &#123; color: 'blue' &#125;, methods: &#123; changeColor() &#123; this.color = 'yellow'; &#125; &#125;&#125;) å½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œè§†å›¾çš„pæ ‡ç­¾æ–‡æœ¬å°±ä¼šä» blueæ”¹å˜æˆyellowã€‚ Vueè¦å®Œæˆè¿™æ¬¡æ›´æ–°ï¼Œå…¶å®éœ€è¦åšä¸¤ä»¶äº‹æƒ…ï¼š ç›‘å¬æ•°æ®colorçš„å˜åŒ–ã€‚ å½“æ•°æ®coloræ›´æ–°å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥ä¾èµ–è¯¥æ•°æ®çš„è§†å›¾ã€‚ æ¢æˆä¸“ä¸šé‚£ä¹ˆä¸€ç‚¹ç‚¹ç‚¹çš„åè¯å°±æ˜¯åˆ©ç”¨æ•°æ®åŠ«æŒ/æ•°æ®ä»£ç†å»è¿›è¡Œä¾èµ–æ”¶é›†ã€å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚ æˆ‘ä»¬åªéœ€è¦è®°ä½ä¸€å¥è¯ï¼šåœ¨getterä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨setterä¸­è§¦å‘ä¾èµ– å¦‚ä½•è¿½è¸ªä¾¦æµ‹æ•°æ®çš„å˜åŒ–é¦–å…ˆæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚ä½•ä¾¦æµ‹ä¸€ä¸ªå¯¹è±¡çš„å˜åŒ–ï¼Ÿ ç›®å‰æ¥è¯´ï¼Œä¾¦æµ‹å¯¹è±¡å˜åŒ–æœ‰ä¸¤ç§æ–¹æ³•ã€‚å¤§å®¶éƒ½çŸ¥é“çš„ï¼ Object.definePropertyvue 2.xå°±æ˜¯ä½¿ç”¨Object.definePropertyæ¥æ•°æ®å“åº”å¼ç³»ç»Ÿçš„ã€‚ä½†æ˜¯ç”¨æ­¤æ–¹æ³•æ¥æ¥ä¾¦æµ‹å˜åŒ–ä¼šæœ‰å¾ˆå¤šç¼ºé™·ã€‚ä¾‹å¦‚: Object.definePropertyæ— æ³•ç›‘æ§åˆ°æ•°ç»„ä¸‹æ ‡çš„å˜åŒ–ï¼Œå¯¼è‡´é€šè¿‡æ•°ç»„ä¸‹æ ‡æ·»åŠ å…ƒç´ ï¼Œä¸èƒ½å®æ—¶å“åº”ï¼› Object.definePropertyåªèƒ½åŠ«æŒå¯¹è±¡çš„å±æ€§ï¼Œä»è€Œéœ€è¦å¯¹æ¯ä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå±æ€§è¿›è¡Œéå†ï¼Œå¦‚æœï¼Œå±æ€§å€¼æ˜¯å¯¹è±¡ï¼Œè¿˜éœ€è¦æ·±åº¦éå†ã€‚ â€¦â€¦ æœ¬æ–‡ä¹Ÿæ˜¯åˆ©ç”¨Object.definePropertyæ¥ä»‹ç»å“åº”å¼ç³»ç»Ÿã€‚ Proxyvue3å°±æ˜¯é€šè¿‡proxyå®ç°å“åº”å¼ç³»ç»Ÿçš„ã€‚è€Œä¸”åœ¨å›½åº†æœŸé—´å·²ç»å‘å¸ƒpre-alphaç‰ˆæœ¬ã€‚ ç›¸æ¯”æ—§çš„Object.defineProperty, proxyå¯ä»¥ä»£ç†æ•´ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æä¾›äº†å¤šä¸ªtrapsï¼Œå¯ä»¥å®ç°è¯¸å¤šåŠŸèƒ½ã€‚æ­¤å¤–ï¼ŒProxyæ”¯æŒä»£ç†æ•°ç»„çš„å˜åŒ–ç­‰ç­‰ å½“ç„¶proxyä¹Ÿæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œå°±æ˜¯æ— æ³•é€šè¿‡polyfillæ¨¡æ‹Ÿï¼Œå…¼å®¹æ€§è¾ƒå·®ã€‚ ä¾èµ–æ”¶é›†çš„é‡è¦è§’è‰² Dep WatcherDepã€Watcheræ˜¯æ•°æ®å“åº”å¼ä¸­ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„è§’è‰²ã€‚ æ”¶é›†ä¾èµ–çš„åœ°æ–¹ Depå› ä¸ºåœ¨è§†å›¾æ¨¡æ¿ä¸Šå¯èƒ½æœ‰å¤šå¤„åœ°æ–¹éƒ½å¼•ç”¨åŒä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥è¦æœ‰ä¸€ä¸ªåœ°æ–¹å»å­˜æ”¾æ•°æ®çš„ä¾èµ–ï¼Œè¿™ä¸ªåœ°æ–¹å°±æ˜¯Depã€‚ Depä¸»è¦ç»´æŠ¤ä¸€ä¸ªä¾èµ–çš„æ•°ç»„ï¼Œå½“æˆ‘ä»¬åˆ©ç”¨renderå‡½æ•°ç”ŸæˆVNodeçš„æ—¶å€™ï¼Œä¼šè§¦å‘æ•°æ®çš„getterï¼Œç„¶ååˆ™ä¼šæŠŠä¾èµ–pushåˆ°Depçš„ä¾èµ–æ•°ç»„ä¸­ã€‚ ä¾èµ–æ˜¯Watcherï¼æˆ‘ä»¬å¯ä»¥æŠŠWatcherç†è§£æˆä¸€ä¸ªä¸­ä»‹çš„è§’è‰²ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘æ•°æ®çš„setterï¼Œç„¶åé€šè¿‡éå†Depä¸­çš„ä¾èµ–Watcherï¼Œç„¶åWatcheré€šçŸ¥é¢å¤–çš„æ“ä½œï¼Œé¢å¤–çš„æ“ä½œå¯èƒ½æ˜¯æ›´æ–°è§†å›¾ã€æ›´æ–°computedã€æ›´æ–°watchç­‰ç­‰â€¦. åŸç†å®ç°è¿˜æ˜¯é‚£å¥è¯ï¼šåœ¨getterä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨setterä¸­è§¦å‘ä¾èµ–ã€‚ ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ä»£ç : ä»£ç æœ‰ç‚¹é•¿ï¼Œä¸‹é¢ä¼šæœ‰æ­¥éª¤æ¥è®²è§£ä¸€æ¬¡ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374/* * åŠ«æŒæ•°æ®çš„getterã€setter */function defineReactive(data, key, val) &#123; // 1-1ï¼šæŠŠcoloræ•°æ®å˜æˆå“åº”å¼ const dep = new Dep(); Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get() &#123; // 3. å› ä¸ºæ¨¡æ¿ç¼–è¯‘watcherè®¿é—®åˆ°äº†colorï¼Œä»è€Œè§¦å‘getæ–¹æ³•ï¼Œè§¦å‘äº†æ”¶é›†ä¾èµ–çš„æ–¹æ³• dep.depend(); return val; &#125;, set(newVal) &#123; if (val === newVal) &#123; return; &#125; val = newVal; // 4-1. å‡è®¾æˆ‘ä»¬é€šè¿‡ `this.color = 'yellow';`å»æ›´æ”¹`color`çš„å€¼ï¼Œå°±ä¼šè§¦å‘setæ–¹æ³•ã€‚ dep.notify(); &#125; &#125;);&#125;/* * depç±»ï¼Œæ”¶é›†ä¾èµ–ï¼Œå’Œè§¦å‘ä¾èµ– */class Dep &#123; constructor() &#123; this.subs = []; // æ”¶é›†ä¾èµ–çš„æ•°ç»„ &#125; // æ”¶é›†ä¾èµ– depend() &#123; // 3-1. é€šè¿‡å¤–éƒ¨çš„å˜é‡æ¥æ·»åŠ åˆ°colorçš„ä¾èµ–ä¸­. if (window.target &amp;&amp; !this.subs.includes(window.target)) &#123; this.subs.push(window.target); &#125; &#125; // é€šçŸ¥ä¾èµ–æ›´æ–° notify() &#123; // 4-2. éå† this.subs.forEach(watcher =&gt; &#123; watcher.update(); &#125;); &#125;&#125;/** * æ•°æ®ä¸å¤–éƒ¨çš„ä¸­ä»‹ */class Watcher &#123; constructor(expr, cb) &#123; this.cb = cb; this.expr = expr; // 2-1. è¿™é‡Œè§¦å‘äº†getæ–¹æ³• this.value = this.get(); &#125; get() &#123; // 2-2. è¿™é‡ŒæŠŠè‡ªå·±(watcher)èµ‹å€¼ç»™äº†å¤–éƒ¨å…¶ä¸­çš„ä¸€ä¸ªå˜é‡ window.target = this; // 2-3. data[this.expr]è§¦å‘äº†colorçš„get const value = data[this.expr]; window.target = undefined; return value; &#125; update() &#123; this.value = this.get(); this.cb(this.value); &#125;&#125; æˆ‘ä»¬æ¥èµ°ä¸€æ¬¡æ­¥éª¤ã€‚ç°åœ¨æˆ‘ä»¬è¦æŠŠæ–‡ç« å¼€å¤´çš„ä¾‹å­ç®€æ˜“çš„è·‘ä¸€æ¬¡..æ‹¬å·é‡Œé¢çš„1-1ï¼Œ2-2æ˜¯å¯¹åº”ä»£ç çš„æ‰§è¡Œç‚¹ã€‚ 1. æŠŠæ•°æ®å˜æˆå“åº”å¼åˆ©ç”¨defineReactiveæŠŠcoloræ•°æ®å˜æˆå“åº”å¼ï¼ˆ1-1ï¼‰ï¼Œæ‰§è¡Œè¿‡è¿™ä¸ªæ–¹æ³•åï¼Œæˆ‘ä»¬è°ƒç”¨console.log(this.color)çš„æ—¶å€™å¯ä»¥è§¦å‘getæ–¹æ³•ã€‚åŒç†å½“æˆ‘ä»¬this.color = &#39;yellow&#39;ã€‚ æ³¨æ„ï¼šåœ¨Object.definePropertyä¸Šé¢åˆå§‹åŒ–ä¸€ä¸ªå­˜æ”¾ä¾èµ–çš„depï¼Œè¿™é‡Œå…¶å®æ˜¯æŠŠdepä½œä¸ºæ•°æ®colorçš„ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œè®©getå’Œsetçš„æ–¹æ³•å¯ä»¥è®¿é—®åˆ°ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„é—­åŒ…ã€‚ 2. ç¼–è¯‘æ¨¡æ¿åˆ›å»ºwatcherå‡è®¾æˆ‘ä»¬ç°åœ¨ç¼–è¯‘æ¨¡æ¿é‡åˆ°ã€‚Vueå°±ä¼šåˆ›å»ºä¸€ä¸ªWatchterï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š123new Watcher('color', () =&gt; &#123; // å½“colorå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œä¼šè§¦å‘è¿™é‡Œçš„æ–¹æ³•ã€‚&#125;); è¿™é‡Œé«˜èƒ½ï¼ï¼ Watcherçš„æ„é€ å‡½æ•°é‡Œé¢è°ƒç”¨äº†get()æ–¹æ³•ï¼ˆ2-2ï¼‰ï¼ŒæŠŠè‡ªå·±(watcher)èµ‹å€¼ç»™äº†ä¸€ä¸ªå¤–éƒ¨å˜é‡ã€‚ ç„¶åå†è§¦å‘getæ–¹æ³•ï¼ˆ2-3ï¼‰ã€‚ 3. getä¸­æ”¶é›†ä¾èµ–å› ä¸ºæ¨¡æ¿ç¼–è¯‘watcherè®¿é—®åˆ°äº†colorï¼Œä»è€Œè§¦å‘getæ–¹æ³•ï¼Œè§¦å‘äº†æ”¶é›†ä¾èµ–çš„æ–¹æ³•ã€‚ è¿›å…¥åˆ°dep.dependæ–¹æ³•ä¸­ï¼ˆ3-1ï¼‰ï¼Œè¿™é‡Œå› ä¸ºåœ¨Watcherä¸­æŠŠè‡ªå·±å­˜åˆ°äº†å¤–éƒ¨å˜é‡ä¸­ï¼Œæ‰€ä»¥åœ¨dep.dependæ–¹æ³•ä¸­å¯ä»¥æ”¶é›†åˆ°ä¾èµ–ã€‚ ç°åœ¨ï¼Œä¾èµ–å°±è¢«æ”¶é›†äº†ã€‚ 4. é€šè¿‡setterè§¦å‘ä¾èµ–å‡è®¾æˆ‘ä»¬é€šè¿‡ this.color = &#39;yellow&#39;;å»æ›´æ”¹colorçš„å€¼ï¼Œå°±ä¼šè§¦å‘setæ–¹æ³•ï¼Œæ‰§è¡Œdep.notifyï¼ˆ4-1ï¼‰ã€‚ ä¼šéå†ä¾èµ–æ•°ç»„ï¼Œä»è€Œå»è§¦å‘Watcherçš„cbæ–¹æ³•ã€‚ cbå°±æ˜¯ä¸Šé¢ä¼ªä»£ç new Watcherçš„é‚£ä¸ªå›è°ƒå‡½æ•°ã€‚ åªè¦å›è°ƒå‡½æ•°é‡Œé¢è¿è¡Œäº†æ“ä½œdomæ–¹æ³•ï¼Œæˆ–è€…è§¦å‘äº†diffç®—æ³•æ›´æ–°domï¼Œéƒ½å¯ä»¥æŠŠè§†å›¾è¿›è¡Œæ›´æ–°ã€‚ æ€»ç»“Vueå“åº”å¼çš„çµé­‚ï¼šåœ¨getterä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨setterä¸­è§¦å‘ä¾èµ–ã€‚ æˆ‘ä»¬å†çœ‹çœ‹å›¾ï¼Œå›é¡¾ä¸€ä¸‹æ•´ä¸ªæµç¨‹ã€‚ é€šè¿‡defineReactiveï¼Œéå†dataé‡Œé¢çš„å±æ€§ï¼ŒæŠŠæ•°æ®çš„getter/setteråŠ«æŒï¼Œç”¨æ¥æ”¶é›†å’Œè§¦å‘ä¾èµ–ã€‚ å½“å¤–ç•Œé€šè¿‡Watcherè¯»å–æ•°æ®æ—¶ï¼Œä¼šè§¦å‘getterä»è€Œå°†Watcheræ·»åŠ åˆ°Depä¾èµ–ä¸­ã€‚ å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘setterï¼Œä»è€ŒDepä¼šå‘ä¾èµ–ï¼ˆWachterï¼‰å‘é€é€šçŸ¥ã€‚ Watcheræ”¶åˆ°é€šçŸ¥åï¼Œä¼šå‘å¤–ç•Œå‘é€é€šçŸ¥ï¼Œå˜åŒ–é€šçŸ¥åˆ°å¤–ç•Œåå¯èƒ½æ¥è§¦è§†å›¾æ›´æ–°ï¼Œä¹Ÿæœ‰å¯èƒ½è§¦å‘ç”¨æˆ·çš„æŸä¸ªå›è°ƒå‡½æ•°ç­‰ç­‰ã€‚ ä¾¦æµ‹æ•°æ®å˜åŒ–çš„ç±»å‹å…¶å®æ•°æ®ç›‘å¬å˜åŒ–æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯â€œæ¨â€(push)ï¼Œå¦ä¸€ç§æ˜¯â€œæ‹‰â€(pull)ã€‚ Reactå’ŒAngularä¸­çš„å˜åŒ–ä¾¦æµ‹éƒ½å±äºâ€œæ‹‰â€ï¼Œå°±æ˜¯è¯´åœ¨æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå®ƒä¸çŸ¥é“å“ªä¸ªæ•°æ®å˜äº†ï¼Œç„¶åä¼šå‘é€ä¸€ä¸ªä¿¡å·ç»™æ¡†æ¶ï¼Œæ¡†æ¶æ”¶åˆ°ä¿¡å·åï¼Œä¼šè¿›è¡Œä¸€ä¸ªæš´åŠ›æ¯”å¯¹æ¥æ‰¾å‡ºé‚£äº›domèŠ‚ç‚¹éœ€è¦é‡æ–°æ¸²æŸ“ã€‚Angularä¸­ä½¿ç”¨çš„æ˜¯è„æ£€æŸ¥ï¼Œåœ¨Reactä½¿ç”¨è™šæ‹Ÿdomçš„diffã€‚ vueçš„æ•°æ®ç›‘å¬å±äºâ€œæ¨â€ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±çŸ¥é“å“ªä¸ªæ•°æ®å‘ç”Ÿå˜åŒ–äº†ï¼Œä»è€Œå»æ›´æ–°æœ‰æ­¤æ•°æ®ä¾èµ–çš„è§†å›¾ã€‚ å› æ­¤ï¼Œæ¡†æ¶çŸ¥é“çš„æ•°æ®æ›´æ–°ä¿¡æ¯è¶Šå¤šï¼Œä¹Ÿå°±å¯ä»¥è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ›´æ–°ã€‚æ¯”å¦‚ï¼Œç›´æ¥é€šè¿‡dom apiæ“ä½œdomã€‚ ç›¸å¯¹â€œæ‹‰â€çš„åŠ›åº¦æ˜¯æœ€ç²—çš„ã€‚çœ‹åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯è§‰å¾—vueçš„æ›´æ–°æ•ˆç‡æœ€å¿«ã€‚ æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­1234&lt;template&gt; &lt;div&gt;&#123;&#123;a&#125;&#125;&lt;/div&gt; &lt;div&gt;&#123;&#123;b&#125;&#125;&lt;/div&gt;&lt;/template&gt; è¿™é‡Œæˆ‘ä»¬çœ‹å‡ºæ¨¡æ¿åªæœ‰aã€bä¸¤ä¸ªæ•°æ®ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è¦åˆ›å»ºä¸¤ä¸ªé—­åŒ…depå»å­˜æ”¾ä¸¤ä¸ªwatcherä¾èµ–ï¼Œæˆ‘ä»¬çŸ¥é“é—­åŒ…çš„ç¼ºç‚¹å°±æ˜¯å†…å­˜æ³„éœ²ã€‚å¦‚æœæœ‰1000ä¸ªæ•°æ®ä¾èµ–åœ¨æ¨¡æ¿ä¸Šï¼Œæ¯ä¸ªæ•°æ®æ‰€ç»‘å®šçš„ä¾èµ–å°±è¶Šå¤šï¼Œä¾èµ–è¿½è¸ªåœ¨å†…å­˜ä¸Šçš„å¼€é”€å°±ä¼šè¶Šå¤§ã€‚ æ‰€ä»¥ï¼Œä»Vue.js2.0å¼€å§‹ï¼Œå®ƒå¼•å…¥äº†è™šæ‹Ÿdomï¼Œä¸€ä¸ªçŠ¶æ€æ‰€ç»‘å®šçš„ä¾èµ–ä¸å†æ˜¯å…·ä½“çš„domèŠ‚ç‚¹ï¼Œè€Œæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå³ä¸€ä¸ªç»„ä»¶ä¸€ä¸ªWatcherã€‚ è¿™æ ·çŠ¶æ€å˜åŒ–åï¼Œä¼šé€šçŸ¥åˆ°ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å†ä½¿ç”¨è™šæ‹Ÿ domè¿›è¡Œæ¯”å¯¹ã€‚è¿™å¯ä»¥å¤§å¤§é™ä½ä¾èµ–æ•°é‡ï¼Œä»è€Œé™ä½ä¾èµ–è¿½è¸ªæ‰€æ¶ˆè€—çš„å†…å­˜ã€‚ä½†å¹¶ä¸æ˜¯å¼•å…¥è™šæ‹Ÿdomåï¼Œæ¸²æŸ“é€Ÿåº¦å˜å¿«äº†ã€‚å‡†ç¡®çš„æ¥è¯´ï¼Œåº”è¯¥æ˜¯80%çš„åœºæ™¯ä¸‹å˜å¾—æ›´å¿«äº†ï¼Œè€Œå‰©ä¸‹çš„20%åè€Œå˜æ…¢äº†ã€‚ ä¸ªäººè§‰å¾—ï¼Œé±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ã€‚â€œæ¨â€æ˜¯ç‰ºç‰²å†…å­˜æ¥æ¢æ›´æ–°é€Ÿåº¦ã€‚â€œæ‹‰â€åˆ™æ˜¯ç‰ºç‰²æ›´æ–°é€Ÿåº¦æ¥è·å–å†…å­˜ã€‚ å‚è€ƒæ–‡çŒ®ï¼šã€Šæ·±å…¥æµ…å‡ºVue.jsã€‹]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>åŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é¢è¯•æ”»ç•¥]]></title>
    <url>%2F2019%2F03%2F18%2F%E9%9D%A2%E8%AF%95%E6%94%BB%E7%95%A5%2F</url>
    <content type="text"><![CDATA[é¢è¯•çš„ä¸€äº›æ”»ç•¥é€’å½’å¼å¿«é€Ÿæ’åº12345678910111213141516171819202122232425262728function quickSort(arr, left, right) &#123; if (left &gt;= right) return // é€‰æ‹©æœ€åä¸€ä¸ªä¸ºåŸºå‡†æ•° var pivot = right var begin = left var end = right // å¦‚æœå·¦è¾¹å¤§äºç­‰äºå³è¾¹ï¼Œå°±é€€å‡ºå¾ªç¯ while (left &lt; right) &#123; while (arr[left] &lt;= arr[pivot] &amp;&amp; left &lt; right) left++ while (arr[right] &gt;= arr[pivot] &amp;&amp; left &lt; right) right-- // å¦‚æœäº¤å‰äº† if (left &gt;= right) &#123; // äº¤æ¢å·¦èŠ‚ç‚¹å’ŒåŸºå‡†æ•°çš„ä½ç½® [arr[left], arr[pivot]] = [arr[pivot], arr[left]] pivot = left break &#125; // å¦‚æœæ²¡äº¤å‰ï¼Œåˆ™äº¤æ¢ä¸¤ä¸ªæ•°çš„ä½ç½® [arr[left], arr[right]] = [arr[right], arr[left]] &#125; // é€’å½’éå† quickSort(arr, begin, pivot - 1) quickSort(arr, pivot + 1, end)&#125;var arr = [1, 3, 2, 4, 5, 4, 4, 4, 10, 30, 2, 4, 6,22,1]quickSort(arr, 0, arr.length - 1)console.log(arr) æ•°ç»„å»é‡åˆ©ç”¨ä¸€ä¸ªç©ºçš„ Object å¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„çš„å€¼å­˜æˆ Object çš„ key å€¼ï¼Œæ¯”å¦‚ Object[value1] = trueï¼Œåœ¨åˆ¤æ–­å¦ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œå¦‚æœ Object[value2]å­˜åœ¨çš„è¯ï¼Œå°±è¯´æ˜è¯¥å€¼æ˜¯é‡å¤çš„ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 123456function unique(array) &#123; var obj = &#123;&#125;; return array.filter(function(item, index, array)&#123; return obj.hasOwnProperty(item) ? false : (obj[item] = true) &#125;)&#125; æ­£åˆ™å»é™¤ç©ºæ ¼123456// å»æ‰æ‰€æœ‰çš„htmlæ ‡è®°str.replace(/&lt;\/?[^&gt;]*&gt;/gim, '');// å»æ‰å‰åç©ºæ ¼str.replace(/(^\s+)|(\s+$)/g, '');// å»é™¤æ–‡ç« ä¸­é—´ç©ºæ ¼str.replace(/\s/g, ''); å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—è·å¾—ç¬¬né¡¹çš„å€¼æ–æ³¢é‚£å¥‘æ•°åˆ—æŒ‡çš„æ˜¯è¿™æ ·ä¸€ä¸ªæ•°åˆ— 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233ï¼Œ377ï¼Œ610ï¼Œ987ï¼Œ1597ï¼Œ2584ï¼Œ4181ï¼Œ6765ï¼Œ10946ï¼Œ17711ï¼Œ28657ï¼Œ46368ï¼Œâ€¦â€¦ å…¶è§„å¾‹æ˜¯ï¼šç¬¬0é¡¹æ˜¯0ï¼Œç¬¬1é¡¹æ˜¯ç¬¬ä¸€ä¸ª1ã€‚è¿™ä¸ªæ•°åˆ—ä»ç¬¬3é¡¹å¼€å§‹ï¼Œæ¯ä¸€é¡¹éƒ½ç­‰äºå‰ä¸¤é¡¹ä¹‹å’Œã€‚ 12345678910111213function myFibonacci(n) &#123; if (n &lt; 0) &#123; console.log('You Should input a Positive integer!') return &#125; if (n === 0) &#123; return 0 &#125; if (n === 1) &#123; return 1 &#125; if (n &gt; 1) &#123; return myFibonacci(n - 1) + myFibonacci(n - 2) &#125;&#125;console.log(myFibonacci(21)) è¿˜æœ‰å¾ˆå¤šæ–¹æ³• es6çš„seté›†åˆ 1const unique = arr =&gt; [...new Set(arr)] æ’åºåæ¯”è¾ƒå‰åä¸¤ä¸ªçš„å€¼ï¼Œç›¸åŒçš„è¯å¹²æ‰ä¸€ä¸ª bindæ–¹æ³•çš„å®ç°ç®€å•ç‰ˆæœ¬ ä¸èƒ½æ”¹å˜newçš„thisæŒ‡å‘ 12345678910Function.prototype.myBind = function (context) &#123; if (typeof this !== 'function') &#123; return &#125; var self = this var args = Array.prototype.slice.call(arguments, 1) return function () &#123; return self.apply(context, args.concat(Array.prototype.slice.call(arguments))) &#125;&#125; å®Œæ•´ç‰ˆæœ¬ bindçš„polyfill MDNä¼ é€é—¨ 1234567891011121314151617181920212223242526272829303132if (!Function.prototype.bind) &#123; Function.prototype.bind = function(oThis) &#123; if (typeof this !== 'function') &#123; // closest thing possible to the ECMAScript 5 // internal IsCallable function throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable'); &#125; var aArgs = Array.prototype.slice.call(arguments, 1), fToBind = this, fNOP = function() &#123;&#125;, fBound = function() &#123; // this instanceof fBound === trueæ—¶,è¯´æ˜è¿”å›çš„fBoundè¢«å½“åšnewçš„æ„é€ å‡½æ•°è°ƒç”¨ return fToBind.apply(this instanceof fBound ? this : oThis, // è·å–è°ƒç”¨æ—¶(fBound)çš„ä¼ å‚.bind è¿”å›çš„å‡½æ•°å…¥å‚å¾€å¾€æ˜¯è¿™ä¹ˆä¼ é€’çš„ aArgs.concat(Array.prototype.slice.call(arguments))); &#125;; // ç»´æŠ¤åŸå‹å…³ç³» if (this.prototype) &#123; // Function.prototype doesn't have a prototype property fNOP.prototype = this.prototype; &#125; // ä¸‹è¡Œçš„ä»£ç ä½¿fBound.prototypeæ˜¯fNOPçš„å®ä¾‹,å› æ­¤ // è¿”å›çš„fBoundè‹¥ä½œä¸ºnewçš„æ„é€ å‡½æ•°,newç”Ÿæˆçš„æ–°å¯¹è±¡ä½œä¸ºthisä¼ å…¥fBound,æ–°å¯¹è±¡çš„__proto__å°±æ˜¯fNOPçš„å®ä¾‹ fBound.prototype = new fNOP(); return fBound; &#125;;&#125; æ·±æ‹·è´æµ…æ‹·è´æµ…æ‹·è´ Object.assign æ‹“å±•è¿ç®—ç¬¦ éå†ä¸€æ¬¡ï¼Œå¦‚ä¸‹ 1234567function simpleClone(target) &#123; var obj = &#123;&#125; for (var i in target) &#123; obj[i] = target[i] &#125; return obj&#125; æ·±æ‹·è´ JSON.parse(JSON.stringify)ï¼Œä¸èƒ½å¤åˆ¶function,æ­£åˆ™,symbol é€’å½’å®ç°ï¼Œå¦‚ä¸‹ 123456789101112131415161718192021222324252627function deepClone(target) &#123; if (!target || !typeof target === 'object') return target const result = Array.isArray(target) ? [] : &#123;&#125; for (const key in target) &#123; if (target.hasOwnProperty(key)) &#123; const element = target[key] // å› ä¸ºtypeof nullä¹Ÿæ˜¯objectï¼Œæ‰€ä»¥è¦åˆ¤æ–­element if (element &amp;&amp; typeof element === 'object') &#123; result[key] = deepClone(element) &#125; else &#123; result[key] = element &#125; &#125; &#125; return result&#125;const a = &#123; b: [1,3,4], c: &#123; d: 1 &#125;, d: function () &#123; console.log(1) &#125;&#125;const b = deepClone(a)console.log(b)// functionæ— æ³•å¤åˆ¶,lodashæºç ä¹Ÿæ²¡æ‰¾åˆ°console.log(a.d === b.d) // true thiseventLoop javascriptæ˜¯ä¸€é—¨å•çº¿ç¨‹è¯­è¨€ï¼Œåœ¨æœ€æ–°çš„HTML5ä¸­æå‡ºäº†Web-Workerï¼Œä½†javascriptæ˜¯å•çº¿ç¨‹è¿™ä¸€æ ¸å¿ƒä»æœªæ”¹å˜ã€‚æ‰€ä»¥ä¸€åˆ‡javascriptç‰ˆçš„â€å¤šçº¿ç¨‹â€éƒ½æ˜¯ç”¨å•çº¿ç¨‹æ¨¡æ‹Ÿå‡ºæ¥çš„ï¼Œä¸€åˆ‡javascriptå¤šçº¿ç¨‹éƒ½æ˜¯çº¸è€è™ï¼ macro-task(å®ä»»åŠ¡)ï¼šåŒ…æ‹¬æ•´ä½“ä»£ç scriptï¼ŒsetTimeoutï¼ŒsetInterval micro-task(å¾®ä»»åŠ¡)ï¼šPromiseï¼Œprocess.nextTick äº‹ä»¶å¾ªç¯çš„é¡ºåºï¼Œå†³å®šjsä»£ç çš„æ‰§è¡Œé¡ºåºã€‚è¿›å…¥æ•´ä½“ä»£ç (å®ä»»åŠ¡)åï¼Œå¼€å§‹ç¬¬ä¸€æ¬¡å¾ªç¯ã€‚æ¥ç€æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚ç„¶åå†æ¬¡ä»å®ä»»åŠ¡å¼€å§‹ï¼Œæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•ï¼Œå†æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚ ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ å®ä»»åŠ¡ -&gt; å…¨éƒ¨å¾®ä»»åŠ¡ -&gt; å®ä»»åŠ¡é˜Ÿåˆ—çš„ä¸€ä¸ªä»»åŠ¡ -&gt; å…¨éƒ¨å¾®ä»»åŠ¡ -&gt; å®ä»»åŠ¡ nodeç¯å¢ƒ ä¸­ process.nextTick æ³¨å†Œçš„å‡½æ•°ä¼˜å…ˆçº§é«˜äº Promise ã€‚ positionå…¼å®¹æ€§pxè½¬æ¢webpackvueåŒå‘ç»‘å®š Object.defineProperty éå†æ£€æµ‹å¯¹è±¡çš„å±æ€§ proxy ä»£ç†æ•´ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¯ä»¥æ£€æµ‹åˆ°æ•°ç»„çš„é•¿åº¦å˜åŒ–å‰ç«¯ä¼˜åŒ– å‡å°‘è¯·æ±‚ èµ„æºåˆå¹¶å’Œå‹ç¼© gzip cdn cssç²¾çµå›¾ å›¾ç‰‡å‹ç¼© ä¸ºæ–‡ä»¶å¤´æŒ‡å®š Expires æˆ– Cache-Control ï¼Œä½¿å†…å®¹å…·æœ‰ç¼“å­˜æ€§ã€‚ æœ€å°åŒ– JavaScript å’Œ CSS çš„ä½¿ç”¨é˜»å¡æ¸²æŸ“ cssæ–‡ä»¶æ”¾é¡¶éƒ¨ jsæ–‡ä»¶æ”¾åº•éƒ¨ é¿å…é‡å®šå‘]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginxè§£å†³è·¨åŸŸ]]></title>
    <url>%2F2019%2F01%2F06%2Fnginx%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%2F</url>
    <content type="text"><![CDATA[nginxåå‘ä»£ç†è§£å†³è·¨åŸŸå‰è¨€ç°åœ¨çš„é¡¹ç›®å¤§éƒ¨åˆ†éƒ½å˜æˆå‰åç«¯åˆ†ç¦»ï¼Œå‰åç«¯é¡¹ç›®åˆ†å¼€å¼€å‘ï¼Œå°¤å…¶æ˜¯å•é¡µé¢åº”ç”¨ï¼Œå‰ç«¯ä»£ç ä¼šå¼€å¯å•ç‹¬çš„æœåŠ¡å™¨ï¼Œè‹¥ç›´æ¥åœ¨å‰ç«¯é¡¹ç›®ä¸­è®¿é—®åç«¯çš„æ¥å£ï¼Œè‚¯å®šä¼šé‡åˆ°å› è·¨åŸŸä¸èƒ½è®¿é—®çš„é—®é¢˜ã€‚ è·¨åŸŸçš„å¸¸è§è§£å†³æ–¹æ³• jsonp cors éœ€è¦æœåŠ¡å™¨è®¾ç½®header Access-Control-Allow-Origin html5 postMessage+iframe nginxåå‘ä»£ç† å®ç°æ–¹æ³•æˆ‘ä»¬åªéœ€è¦é…ç½®nginxï¼Œåœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šé…ç½®å¤šä¸ªå‰ç¼€æ¥è½¬å‘http/httpsè¯·æ±‚åˆ°å¤šä¸ªçœŸå®çš„æœåŠ¡å™¨å³å¯ã€‚è¿™æ ·ï¼Œè¿™ä¸ªæœåŠ¡å™¨ä¸Šæ‰€æœ‰urléƒ½æ˜¯ç›¸åŒçš„åŸŸåã€åè®®å’Œç«¯å£ã€‚ æ¯”å¦‚æ¥å£çš„å‰ç¼€æ˜¯ /api/ æˆ‘ä»¬å¯ä»¥å†™å¤šä¸€ä¸ªlocationï¼Œæ‹¦æˆªapiï¼Œå»åå‘ä»£ç†æ¥å£æœåŠ¡å™¨ã€‚ 1234567location /api/ &#123; # æ‰€æœ‰å¯¹åç«¯çš„è¯·æ±‚åŠ ä¸€ä¸ªapiå‰ç¼€æ–¹ä¾¿åŒºåˆ†ï¼ŒçœŸæ­£è®¿é—®çš„æ—¶å€™ç§»é™¤è¿™ä¸ªå‰ç¼€ # é‡å†™urlï¼ŒæŠŠ/api/è¿‡æ»¤æ‰ rewrite ^/api/(.*)$ /$1 break; # API Server proxy_pass http://www.apiServer.com; #å°†çœŸæ­£çš„è¯·æ±‚ä»£ç†åˆ°apiServer,å³çœŸå®çš„æœåŠ¡å™¨åœ°å€ï¼Œajaxçš„urlä¸º/api/user/1çš„è¯·æ±‚å°†ä¼šè®¿é—®http://www.apiServer.com/user/1&#125;]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>è·¨åŸŸ</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginxåŸºç¡€]]></title>
    <url>%2F2019%2F01%2F01%2Fnginx%2F</url>
    <content type="text"><![CDATA[nginx â€œNginxæ˜¯ä¸€æ¬¾è½»é‡çº§çš„HTTPæœåŠ¡å™¨ï¼Œé‡‡ç”¨äº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥éé˜»å¡å¤„ç†æ–¹å¼æ¡†æ¶ï¼Œè¿™è®©å…¶å…·æœ‰æå¥½çš„IOæ€§èƒ½ï¼Œæ—¶å¸¸ç”¨äºæœåŠ¡ç«¯çš„åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡ã€‚â€ åŸºæœ¬æ“ä½œåœæ­¢nginx nginx -s stop nginx -s quit killall nginx é‡å¯nginx nginx -s reload åœæ­¢æœåŠ¡ systemctl stop nginx.service é‡å¯æœåŠ¡ systemctl restart nginx.service æŸ¥çœ‹ç«¯å£å· åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒNginxå¯åŠ¨åä¼šç›‘å¬80ç«¯å£ï¼Œä»è€Œæä¾›HTTPè®¿é—®ï¼Œå¦‚æœ80ç«¯å£å·²ç»è¢«å ç”¨åˆ™ä¼šå¯åŠ¨å¤±è´¥ã€‚æˆ‘ä¹ˆå¯ä»¥ä½¿ç”¨ netstat -tlnp å‘½ä»¤æŸ¥çœ‹ç«¯å£å·çš„å ç”¨æƒ…å†µã€‚ é…ç½®æ–‡ä»¶(nginx.conf) nginx.confæ–‡ä»¶æ˜¯Nginxæ€»é…ç½®æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬æ­å»ºæœåŠ¡å™¨æ—¶ç»å¸¸è°ƒæ•´çš„æ–‡ä»¶ã€‚ ä¸‹é¢æ˜¯æ–‡ä»¶çš„è¯¦ç»†æ³¨é‡Š 12345678910111213141516171819202122232425#è¿è¡Œç”¨æˆ·ï¼Œé»˜è®¤å³æ˜¯nginxï¼Œå¯ä»¥ä¸è¿›è¡Œè®¾ç½®user nginx;#Nginxè¿›ç¨‹ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºå’ŒCPUæ ¸æ•°ä¸€æ ·worker_processes 1;#é”™è¯¯æ—¥å¿—å­˜æ”¾ç›®å½•error_log /var/log/nginx/error.log warn;#è¿›ç¨‹pidå­˜æ”¾ä½ç½®pid /var/run/nginx.pid;events &#123; worker_connections 1024; # å•ä¸ªåå°è¿›ç¨‹çš„æœ€å¤§å¹¶å‘æ•°&#125;http &#123; include /etc/nginx/mime.types; #æ–‡ä»¶æ‰©å±•åä¸ç±»å‹æ˜ å°„è¡¨ default_type application/octet-stream; #é»˜è®¤æ–‡ä»¶ç±»å‹ #è®¾ç½®æ—¥å¿—æ¨¡å¼ log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; access_log /var/log/nginx/access.log main; #nginxè®¿é—®æ—¥å¿—å­˜æ”¾ä½ç½® sendfile on; #å¼€å¯é«˜æ•ˆä¼ è¾“æ¨¡å¼ #tcp_nopush on; #å‡å°‘ç½‘ç»œæŠ¥æ–‡æ®µçš„æ•°é‡ keepalive_timeout 65; #ä¿æŒè¿æ¥çš„æ—¶é—´ï¼Œä¹Ÿå«è¶…æ—¶æ—¶é—´ #gzip on; #å¼€å¯gzipå‹ç¼© include ./include/*; #åŒ…å«çš„å­é…ç½®é¡¹ä½ç½®å’Œæ–‡ä»¶ï¼Œå› ä¸ºæ‰€æœ‰çš„æœ€å¥½ä¸è¦å…¨å†™åœ¨è¿™é‡Œï¼Œå®¹æ˜“ç®¡ç†ã€‚&#125; locationé…ç½®è¯­æ³•è§„åˆ™ï¼šlocation [=|~|~*|^~] /uri/ { â€¦ } = å¼€å¤´è¡¨ç¤ºç²¾ç¡®åŒ¹é… ^~ å¼€å¤´è¡¨ç¤ºuriä»¥æŸä¸ªå¸¸è§„å­—ç¬¦ä¸²å¼€å¤´ï¼Œç†è§£ä¸ºåŒ¹é… urlè·¯å¾„å³å¯ã€‚ ~ å¼€å¤´è¡¨ç¤ºåŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é… ~* å¼€å¤´è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é… !~ å’Œ !~*åˆ†åˆ«ä¸ºåŒºåˆ†å¤§å°å†™ä¸åŒ¹é…åŠä¸åŒºåˆ†å¤§å°å†™ä¸åŒ¹é… çš„æ­£åˆ™ / é€šç”¨åŒ¹é…ï¼Œä»»ä½•è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ°ã€‚ 12345678910111213141516171819202122232425location = / &#123; #è§„åˆ™A&#125;location = /login &#123; #è§„åˆ™B&#125;location ^~ /static/ &#123; #è§„åˆ™C&#125;location ~ \.(gif|jpg|png|js|css)$ &#123; #è§„åˆ™D&#125;location ~* \.png$ &#123; #è§„åˆ™E&#125;location !~ \.xhtml$ &#123; #è§„åˆ™F&#125;location !~* \.xhtml$ &#123; #è§„åˆ™G&#125;location / &#123; #è§„åˆ™H&#125; é‚£ä¹ˆäº§ç”Ÿçš„æ•ˆæœå¦‚ä¸‹ï¼š è®¿é—®æ ¹ç›®å½•/ï¼Œ æ¯”å¦‚ http://localhost/ å°†åŒ¹é…è§„åˆ™A è®¿é—® http://localhost/login å°†åŒ¹é…è§„åˆ™Bï¼Œhttp://localhost/register åˆ™åŒ¹é…è§„åˆ™H è®¿é—® http://localhost/static/a.html å°†åŒ¹é…è§„åˆ™C è®¿é—® http://localhost/a.gif, http://localhost/b.jpg å°†åŒ¹é…è§„åˆ™Då’Œè§„åˆ™Eï¼Œä½†æ˜¯è§„åˆ™Dé¡ºåºä¼˜å…ˆï¼Œè§„åˆ™Eä¸èµ·ä½œç”¨ï¼Œè€Œ http://localhost/static/c.png åˆ™ä¼˜å…ˆåŒ¹é…åˆ° è§„åˆ™C è®¿é—® http://localhost/a.PNG åˆ™åŒ¹é…è§„åˆ™Eï¼Œ è€Œä¸ä¼šåŒ¹é…è§„åˆ™Dï¼Œå› ä¸ºè§„åˆ™Eä¸åŒºåˆ†å¤§å°å†™ã€‚ è®¿é—® http://localhost/a.xhtml ï¼Œä¸ä¼šåŒ¹é…è§„åˆ™Få’Œè§„åˆ™Gï¼Œhttp://localhost/a.XHTMLä¸ä¼šåŒ¹é…è§„åˆ™Gï¼Œå› ä¸ºä¸åŒºåˆ†å¤§å°å†™ã€‚è§„åˆ™Fï¼Œè§„åˆ™Gå±äºæ’é™¤æ³•ï¼Œç¬¦åˆåŒ¹é…è§„åˆ™ä½†æ˜¯ä¸ä¼šåŒ¹é…åˆ°ï¼Œæ‰€ä»¥æƒ³æƒ³çœ‹å®é™…åº”ç”¨ä¸­å“ªé‡Œä¼šç”¨åˆ°ã€‚ è®¿é—® http://localhost/category/id/1111 åˆ™æœ€ç»ˆåŒ¹é…åˆ°è§„åˆ™Hï¼Œå› ä¸ºä»¥ä¸Šè§„åˆ™éƒ½ä¸åŒ¹é…ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥æ˜¯nginxè½¬å‘è¯·æ±‚ç»™åç«¯åº”ç”¨æœåŠ¡å™¨ï¼Œæ¯”å¦‚FastCGIï¼ˆphpï¼‰ï¼Œtomcatï¼ˆjspï¼‰ï¼Œnginxä½œä¸ºæ–¹å‘ä»£ç†æœåŠ¡å™¨å­˜åœ¨ã€‚ è®¿é—®æƒé™åœ¨åŒä¸€ä¸ªå—ä¸‹çš„ä¸¤ä¸ªæƒé™æŒ‡ä»¤ï¼Œå…ˆå‡ºç°çš„è®¾ç½®ä¼šè¦†ç›–åå‡ºç°çš„è®¾ç½®ï¼ˆä¹Ÿå°±æ˜¯è°å…ˆè§¦å‘ï¼Œè°èµ·ä½œç”¨ï¼‰ã€‚å³deny allä¹‹åï¼Œallowè°éƒ½æ²¡ç”¨ã€‚ 1234location / &#123; deny 192.168.1.23; # ç¦æ­¢è®¿é—® allow 192.168.1.23; # å…è®¸è®¿é—®&#125; åŸºäºç«¯å£å·é…ç½®è™šæ‹Ÿä¸»æœº åŸºäºç«¯å£å·æ¥é…ç½®è™šæ‹Ÿä¸»æœºï¼Œç®—æ˜¯Nginxä¸­æœ€ç®€å•çš„ä¸€ç§æ–¹å¼äº†ã€‚åŸç†å°±æ˜¯Nginxç›‘å¬å¤šä¸ªç«¯å£ï¼Œæ ¹æ®ä¸åŒçš„ç«¯å£å·ï¼Œæ¥åŒºåˆ†ä¸åŒçš„ç½‘ç«™ã€‚ 123456server &#123; listen 8001; # ç«¯å£ server_name localhost; # åŸŸå root /usr/share/nginx/html/html8001; # è·¯å¾„ index index.html;&#125; åŸºäºåŸŸåè®¾ç½®è™šæ‹Ÿä¸»æœº12345678server&#123; listen 80; # ç«¯å£ server_name www.crcong.cn; # åŸŸå location / &#123; root /www.crcong.cn; index index.html index.htm; &#125;&#125; åå‘ä»£ç† proxy_pass æ —å­è®¿é—® www.crcong.cn å°±ä¼šä»£ç†åˆ° 127.0.0.1:3000 1234567server&#123; listen 80; server_name www.crcong.cn; location / &#123; proxy_pass 127.0.0.1:3000; &#125;&#125; å…¶ä»–ä»£ç†æŒ‡ä»¤ proxy_set_header :åœ¨å°†å®¢æˆ·ç«¯è¯·æ±‚å‘é€ç»™åç«¯æœåŠ¡å™¨ä¹‹å‰ï¼Œæ›´æ”¹æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚å¤´ä¿¡æ¯ã€‚ proxy_connect_timeout:é…ç½®Nginxä¸åç«¯ä»£ç†æœåŠ¡å™¨å°è¯•å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´ã€‚ proxy_read_timeout : é…ç½®Nginxå‘åç«¯æœåŠ¡å™¨ç»„å‘å‡ºreadè¯·æ±‚åï¼Œç­‰å¾…ç›¸åº”çš„è¶…æ—¶æ—¶é—´ã€‚ proxy_send_timeoutï¼šé…ç½®Nginxå‘åç«¯æœåŠ¡å™¨ç»„å‘å‡ºwriteè¯·æ±‚åï¼Œç­‰å¾…ç›¸åº”çš„è¶…æ—¶æ—¶é—´ã€‚ proxy_redirect :ç”¨äºä¿®æ”¹åç«¯æœåŠ¡å™¨è¿”å›çš„å“åº”å¤´ä¸­çš„Locationå’ŒRefreshã€‚ gzip gzipæ˜¯ç½‘é¡µçš„ä¸€ç§ç½‘é¡µå‹ç¼©æŠ€æœ¯ï¼Œç»è¿‡gzipå‹ç¼©åï¼Œé¡µé¢å¤§å°å¯ä»¥å˜ä¸ºåŸæ¥çš„30%ç”šè‡³æ›´å°ã€‚æ›´å°çš„ç½‘é¡µä¼šè®©ç”¨æˆ·æµè§ˆçš„ä½“éªŒæ›´å¥½ï¼Œé€Ÿåº¦æ›´å¿«ã€‚gzipç½‘é¡µå‹ç¼©çš„å®ç°éœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„æ”¯æŒã€‚ ç®€å•å¼€å¯æ–¹å¼123456http &#123; ..... gzip on; gzip_types text/plain application/javascript text/css; # å‹ç¼©æ–‡æœ¬ã€JavaScriptå’Œcss .....&#125; å…¶ä»–æŒ‡ä»¤ gzip : è¯¥æŒ‡ä»¤ç”¨äºå¼€å¯æˆ– å…³é—­gzipæ¨¡å—ã€‚ gzip_buffers : è®¾ç½®ç³»ç»Ÿè·å–å‡ ä¸ªå•ä½çš„ç¼“å­˜ç”¨äºå­˜å‚¨gzipçš„å‹ç¼©ç»“æœæ•°æ®æµã€‚ gzip_comp_level : gzipå‹ç¼©æ¯”ï¼Œå‹ç¼©çº§åˆ«æ˜¯1-9ï¼Œ1çš„å‹ç¼©çº§åˆ«æœ€ä½ï¼Œ9çš„å‹ç¼©çº§åˆ«æœ€é«˜ã€‚å‹ç¼©çº§åˆ«è¶Šé«˜å‹ç¼©ç‡è¶Šå¤§ï¼Œå‹ç¼©æ—¶é—´è¶Šé•¿ã€‚ gzip_disable : å¯ä»¥é€šè¿‡è¯¥æŒ‡ä»¤å¯¹ä¸€äº›ç‰¹å®šçš„User-Agentä¸ä½¿ç”¨å‹ç¼©åŠŸèƒ½ã€‚ gzip_min_length:è®¾ç½®å…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°ï¼Œé¡µé¢å­—èŠ‚æ•°ä»ç›¸åº”æ¶ˆæ¯å¤´çš„Content-lengthä¸­è¿›è¡Œè·å–ã€‚ gzip_http_versionï¼šè¯†åˆ«HTTPåè®®ç‰ˆæœ¬ï¼Œå…¶å€¼å¯ä»¥æ˜¯1.1.æˆ–1.0. gzip_proxied : ç”¨äºè®¾ç½®å¯ç”¨æˆ–ç¦ç”¨ä»ä»£ç†æœåŠ¡å™¨ä¸Šæ”¶åˆ°ç›¸åº”å†…å®¹gzipå‹ç¼©ã€‚ gzip_vary : ç”¨äºåœ¨å“åº”æ¶ˆæ¯å¤´ä¸­æ·»åŠ Varyï¼šAccept-Encoding,ä½¿ä»£ç†æœåŠ¡å™¨æ ¹æ®è¯·æ±‚å¤´ä¸­çš„Accept-Encodingè¯†åˆ«æ˜¯å¦å¯ç”¨gzipå‹ç¼©ã€‚]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[canvas]]></title>
    <url>%2F2018%2F12%2F30%2Fcanvas%2F</url>
    <content type="text"><![CDATA[canvasè·å–å…ƒç´ å¹¶è·å¾—2dä¸Šä¸‹æ–‡å¯¹è±¡123&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;const canvas = document.querySelector(&apos;#canvas&apos;);const ctx = canvas.getContext(&apos;2d&apos;); ä¸€äº›å‘ ä¸èƒ½ç”¨csså»æ§åˆ¶canvaså¤§å°ï¼Œä¸ç„¶ä¼šä½¿å›¾å½¢æ‹‰ä¼¸ã€‚å¯ä»¥é€šè¿‡&lt;canvas id=&#39;canvas&#39; width=&#39;500&#39; height=&#39;400&#39;&gt;&lt;/canvas&gt;ã€‚æˆ–è€…jsæ§åˆ¶ã€‚ æ …æ ¼(grid)å’Œåæ ‡ç©ºé—´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œcanvaså…ƒç´ é»˜è®¤è¢«ç½‘æ ¼æ‰€è¦†ç›–ã€‚é€šå¸¸æ¥è¯´ç½‘æ ¼ä¸­çš„ä¸€ä¸ªå•å…ƒç›¸å½“äºcanvaså…ƒç´ ä¸­çš„ä¸€åƒç´ ã€‚æ …æ ¼çš„èµ·ç‚¹ä¸ºå·¦ä¸Šè§’ï¼ˆåæ ‡ä¸ºï¼ˆ0,0ï¼‰ï¼‰ã€‚æ‰€æœ‰å…ƒç´ çš„ä½ç½®éƒ½ç›¸å¯¹äºåŸç‚¹æ¥å®šä½ã€‚æ‰€ä»¥å›¾ä¸­è“è‰²æ–¹å½¢å·¦ä¸Šè§’çš„åæ ‡ä¸ºè·ç¦»å·¦è¾¹ï¼ˆXè½´ï¼‰xåƒç´ ï¼Œè·ç¦»ä¸Šè¾¹ï¼ˆYè½´ï¼‰yåƒç´ ï¼ˆåæ ‡ä¸ºï¼ˆx,yï¼‰ï¼‰ã€‚ ç®€å•çš„çŸ©å½¢canvas åªæ”¯æŒä¸€ç§åŸç”Ÿçš„ å›¾å½¢ç»˜åˆ¶ï¼šçŸ©å½¢ã€‚æ‰€æœ‰å…¶ä»–å›¾å½¢éƒ½è‡³å°‘éœ€è¦ç”Ÿæˆä¸€ç§è·¯å¾„(path)ã€‚ api fillRect(x, y, width, height) ç»˜åˆ¶ä¸€ä¸ªå¡«å……çš„çŸ©å½¢ strockRect(x, y, width, height) ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢çš„è¾¹æ¡† clearRect(x, y, widh, height) æ¸…é™¤æŒ‡å®šçš„çŸ©å½¢åŒºåŸŸï¼Œç„¶åè¿™å—åŒºåŸŸä¼šå˜çš„å®Œå…¨é€æ˜ x, yï¼šæŒ‡çš„æ˜¯çŸ©å½¢çš„å·¦ä¸Šè§’çš„åæ ‡ã€‚(ç›¸å¯¹äºcanvasçš„åæ ‡åŸç‚¹) width, heightï¼šæŒ‡çš„æ˜¯ç»˜åˆ¶çš„çŸ©å½¢çš„å®½å’Œé«˜ è¶…å‡ºèŒƒå›´ä¼šéšè— strokeRectæŠŠä¸€åƒç´ çš„è¾¹æ¡†æ¸²æŸ“æˆä¸¤åƒç´  åƒè¿™ä¸ªç”¨canvasç»˜åˆ¶å‡ºä¸€ä¸ªæ–¹å½¢çš„æ—¶å€™ï¼Œç”±äºè®¾ç½®çš„topå€¼å’Œleftå€¼æ˜¯50pxï¼Œæ‰€ä»¥canvasä¼šåœ¨ç¬¬50å’Œç¬¬51ä¸ªåƒç´ ä¹‹é—´ä»ä¸­é—´å¼€å§‹ç»˜åˆ¶ä¸€åƒç´ çš„çº¿ï¼Œç¬¬50å’Œç¬¬51ä¸ªåƒç´ å„å 0.5åƒç´ ã€‚ è®¡ç®—æœºå¹¶ä¸èƒ½æ¸²æŸ“0.5ä¸ªåƒç´ ï¼Œæ‰€ä»¥å¯¼è‡´ç¬¬50å’Œç¬¬51ä¸ªåƒç´ éƒ½è¢«æ¸²æŸ“äº†ï¼Œæ¸²æŸ“çš„é¢œè‰²å°±æˆäº†ç°è‰²ã€‚ï¼ˆç™½åŠ é»‘ï¼šèƒŒæ™¯è‰²åŠ çº¿çš„é¢œè‰²ï¼‰ è§£å†³åŠæ³• æ—¢ç„¶ä¼šå› ä¸º0.5åƒç´ çš„é—®é¢˜è€Œæ¸²æŸ“äº†ä¸¤ä¸ªåƒç´ ï¼Œé‚£ä¹ˆåœ¨è®¾ç½®topå€¼å’Œleftå€¼æ—¶ï¼Œå¢åŠ æˆ–å‡å°‘0.5åƒç´ å°±å¯ä»¥è§£å†³äº†ã€‚æƒ³ç»˜åˆ¶åœ¨ç¬¬51ä¸ªåƒç´ å°±è®¾ç½®50.5ï¼Œæƒ³ç»˜åˆ¶åœ¨ç¬¬50ä¸ªåƒç´ å°±è®¾ç½®49.5ã€‚ å¦å¤–ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”»å‡ºæ¥çš„æ–¹å½¢å¤§å°åªæœ‰99*99åƒç´ ï¼Œè¦é™¤å»ä¸€è¾¹çº¿çš„å®½åº¦ã€‚ è·¯å¾„ å›¾å½¢çš„åŸºæœ¬å…ƒç´ æ˜¯è·¯å¾„ã€‚ è·¯å¾„æ˜¯é€šè¿‡ä¸åŒé¢œè‰²å’Œå®½åº¦çš„çº¿æ®µæˆ–æ›²çº¿ç›¸è¿å½¢æˆçš„ä¸åŒå½¢çŠ¶çš„ç‚¹çš„é›†åˆã€‚ ä¸€ä¸ªè·¯å¾„ï¼Œç”šè‡³ä¸€ä¸ªå­è·¯å¾„ï¼Œéƒ½æ˜¯é—­åˆçš„ã€‚ ä½¿ç”¨è·¯å¾„ç»˜åˆ¶å›¾å½¢éœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤ï¼š åˆ›å»ºè·¯å¾„èµ·å§‹ç‚¹ è°ƒç”¨ç»˜åˆ¶æ–¹æ³•å»ç»˜åˆ¶å‡ºè·¯å¾„ æŠŠè·¯å¾„å°é—­ ä¸€æ—¦è·¯å¾„ç”Ÿæˆï¼Œé€šè¿‡æè¾¹æˆ–å¡«å……è·¯å¾„åŒºåŸŸæ¥æ¸²æŸ“å›¾å½¢ã€‚ éœ€è¦ç”¨åˆ°çš„api beginPath() æ–°å»ºä¸€æ¡è·¯å¾„ï¼Œè·¯å¾„ä¸€æ—¦åˆ›å»ºæˆåŠŸï¼Œå›¾å½¢ç»˜åˆ¶å‘½ä»¤è¢«æŒ‡å‘åˆ°è·¯å¾„ä¸Šç”Ÿæˆè·¯å¾„ moveTo(x, y) æŠŠç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡(x, y)ã€‚ç›¸å½“äºè®¾ç½®è·¯å¾„çš„èµ·å§‹ç‚¹åæ ‡ã€‚ closePath() é—­åˆè·¯å¾„ä¹‹åï¼Œå›¾å½¢ç»˜åˆ¶å‘½ä»¤åˆé‡æ–°æŒ‡å‘åˆ°ä¸Šä¸‹æ–‡ä¸­ stroke() é€šè¿‡çº¿æ¡æ¥ç»˜åˆ¶å›¾å½¢è½®å»“ fill() é€šè¿‡å¡«å……è·¯å¾„çš„å†…å®¹åŒºåŸŸç”Ÿæˆå®å¿ƒçš„å›¾å½¢ ç®€å•ä¾‹å­ 123456ctx.beginPath(); //æ–°å»ºä¸€æ¡pathctx.moveTo(50, 50); //æŠŠç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡ctx.lineTo(200, 50); //ç»˜åˆ¶ä¸€æ¡ä»å½“å‰ä½ç½®åˆ°æŒ‡å®šåæ ‡(200, 50)çš„ç›´çº¿.//é—­åˆè·¯å¾„ã€‚ä¼šæ‹‰ä¸€æ¡ä»å½“å‰ç‚¹åˆ°pathèµ·å§‹ç‚¹çš„ç›´çº¿ã€‚å¦‚æœå½“å‰ç‚¹ä¸èµ·å§‹ç‚¹é‡åˆï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšctx.closePath();ctx.stroke(); //ç»˜åˆ¶è·¯å¾„ã€‚ ç®€å•ä¸‰è§’å½¢ä¾‹å­ 123456789ctx.beginPath();ctx.moveTo(10, 10);ctx.lineTo(10, 40);ctx.lineTo(40, 10);ctx.closePath();ctx.stroke();ctx.closePath(); //è™½ç„¶æˆ‘ä»¬åªç»˜åˆ¶äº†ä¸¤æ¡çº¿æ®µï¼Œä½†æ˜¯closePathä¼šclosePathï¼Œä»ç„¶æ˜¯ä¸€ä¸ª3è§’å½¢ctx.stroke(); //æè¾¹ã€‚strokeä¸ä¼šè‡ªåŠ¨closePath()ctx.fill(); //å¡«å……é—­åˆåŒºåŸŸã€‚å¦‚æœpathæ²¡æœ‰é—­åˆï¼Œåˆ™fill()ä¼šè‡ªåŠ¨é—­åˆè·¯å¾„ ç»˜åˆ¶åœ†å¼§ æœ‰ä¸¤ä¸ªapi arc(x, y, r, startAngle, endAngle, anticlockwise)(x, y) ä¸ºåœ†å¿ƒï¼Œä»¥ r ä¸ºåŠå¾„ï¼Œä» startAngle å¼§åº¦å¼€å§‹åˆ° endAngle å¼§åº¦ç»“æŸã€‚anticlosewise æ˜¯å¸ƒå°”å€¼ï¼Œtrueè¡¨ç¤ºé€†æ—¶é’ˆï¼Œfalseè¡¨ç¤ºé¡ºæ—¶é’ˆã€‚(é»˜è®¤æ˜¯é¡ºæ—¶é’ˆ) æ³¨æ„ï¼šè¿™é‡Œçš„åº¦æ•°éƒ½æ˜¯å¼§åº¦ã€‚0å¼§åº¦æ˜¯æŒ‡çš„xè½´æ­£æ–¹å½¢ radians = (Math.PI / 180) * degrees; //è§’åº¦è½¬æ¢æˆå¼§åº¦ arcTo(x1, y1, x2, y2, radius)arcToæ–¹æ³•çš„è¯´æ˜ï¼š è¿™ä¸ªæ–¹æ³•å¯ä»¥è¿™æ ·ç†è§£ã€‚ç»˜åˆ¶çš„å¼§å½¢æ˜¯ç”±ä¸¤æ¡åˆ‡çº¿æ‰€å†³å®šã€‚ ç¬¬ 1 æ¡åˆ‡çº¿ï¼šèµ·å§‹ç‚¹å’Œæ§åˆ¶ç‚¹1å†³å®šçš„ç›´çº¿ã€‚ ç¬¬ 2 æ¡åˆ‡çº¿ï¼šæ§åˆ¶ç‚¹1 å’Œæ§åˆ¶ç‚¹2å†³å®šçš„ç›´çº¿ã€‚ å…¶å®ç»˜åˆ¶çš„åœ†å¼§å°±æ˜¯ä¸è¿™ä¸¤æ¡ç›´çº¿ç›¸åˆ‡çš„åœ†å¼§ã€‚ 123456ctx.beginPath();ctx.moveTo(50, 50);//å‚æ•°1ã€2ï¼šæ§åˆ¶ç‚¹1åæ ‡ å‚æ•°3ã€4ï¼šæ§åˆ¶ç‚¹2åæ ‡ å‚æ•°4ï¼šåœ†å¼§åŠå¾„ctx.arcTo(200, 50, 200, 200, 100);ctx.lineTo(200, 200)ctx.stroke(); ç»˜åˆ¶è´å¡å°”æ›²çº¿quadraticCurveTo(cp1x, cp1y, x, y) è¯´æ˜ï¼š å‚æ•°1å’Œ2ï¼šæ§åˆ¶ç‚¹åæ ‡ å‚æ•°3å’Œ4ï¼šç»“æŸç‚¹åæ ‡ æ·»åŠ æ ·å¼å’Œé¢œè‰² å¦‚æœæƒ³è¦ç»™å›¾å½¢ä¸Šè‰²ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§å¯ä»¥åšåˆ°ã€‚ fillStyle = color è®¾ç½®å›¾å½¢çš„å¡«å……é¢œè‰² strokeStyle = color è®¾ç½®å›¾å½¢è½®å»“çš„é¢œè‰² color å¯ä»¥æ˜¯è¡¨ç¤º css é¢œè‰²å€¼çš„å­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡æˆ–è€…å›¾æ¡ˆå¯¹è±¡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿æ¡å’Œå¡«å……é¢œè‰²éƒ½æ˜¯é»‘è‰²ã€‚ ä¸€æ—¦æ‚¨è®¾ç½®äº† strokeStyle æˆ–è€… fillStyle çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°å€¼å°±ä¼šæˆä¸ºæ–°ç»˜åˆ¶çš„å›¾å½¢çš„é»˜è®¤å€¼ã€‚å¦‚æœä½ è¦ç»™æ¯ä¸ªå›¾å½¢ä¸Šä¸åŒçš„é¢œè‰²ï¼Œä½ éœ€è¦é‡æ–°è®¾ç½® fillStyle æˆ– strokeStyle çš„å€¼ã€‚ Transparency(é€æ˜åº¦)globalAlpha = transparencyValue è¿™ä¸ªå±æ€§å½±å“åˆ° canvas é‡Œæ‰€æœ‰å›¾å½¢çš„é€æ˜åº¦ï¼Œæœ‰æ•ˆçš„å€¼èŒƒå›´æ˜¯ 0.0 ï¼ˆå®Œå…¨é€æ˜ï¼‰åˆ° 1.0ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰ï¼Œé»˜è®¤æ˜¯ 1.0ã€‚ globalAlpha å±æ€§åœ¨éœ€è¦ç»˜åˆ¶å¤§é‡æ‹¥æœ‰ç›¸åŒé€æ˜åº¦çš„å›¾å½¢æ—¶å€™ç›¸å½“é«˜æ•ˆã€‚ä¸è¿‡ï¼Œæˆ‘è®¤ä¸ºä½¿ç”¨rgba()è®¾ç½®é€æ˜åº¦æ›´åŠ å¥½ä¸€äº›ã€‚ line style ä¸€äº›api lineWidth = value çº¿å®½ã€‚åªèƒ½æ˜¯æ­£å€¼ã€‚é»˜è®¤æ˜¯1.0ã€‚ èµ·å§‹ç‚¹å’Œç»ˆç‚¹çš„è¿çº¿ä¸ºä¸­å¿ƒï¼Œä¸Šä¸‹å„å çº¿å®½çš„ä¸€åŠã€‚ lineCap = type çº¿æ¡æœ«ç«¯æ ·å¼ã€‚ å…±æœ‰3ä¸ªå€¼ï¼š buttï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸ roundï¼šçº¿æ®µæœ«ç«¯ä»¥åœ†å½¢ç»“æŸ squareï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸï¼Œä½†æ˜¯å¢åŠ äº†ä¸€ä¸ªå®½åº¦å’Œçº¿æ®µç›¸åŒï¼Œé«˜åº¦æ˜¯çº¿æ®µåšåº¦ä¸€åŠçš„çŸ©å½¢åŒºåŸŸã€‚ lineJoin = type å…±æœ‰3ä¸ªå€¼round, bevel å’Œ miterï¼š round é€šè¿‡å¡«å……ä¸€ä¸ªé¢å¤–çš„ï¼Œåœ†å¿ƒåœ¨ç›¸è¿éƒ¨åˆ†æœ«ç«¯çš„æ‰‡å½¢ï¼Œç»˜åˆ¶æ‹è§’çš„å½¢çŠ¶ã€‚ åœ†è§’çš„åŠå¾„æ˜¯çº¿æ®µçš„å®½åº¦ã€‚ bevel åœ¨ç›¸è¿éƒ¨åˆ†çš„æœ«ç«¯å¡«å……ä¸€ä¸ªé¢å¤–çš„ä»¥ä¸‰è§’å½¢ä¸ºåº•çš„åŒºåŸŸï¼Œ æ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰å„è‡ªç‹¬ç«‹çš„çŸ©å½¢æ‹è§’ã€‚ miter (é»˜è®¤) é€šè¿‡å»¶ä¼¸ç›¸è¿éƒ¨åˆ†çš„å¤–è¾¹ç¼˜ï¼Œä½¿å…¶ç›¸äº¤äºä¸€ç‚¹ï¼Œå½¢æˆä¸€ä¸ªé¢å¤–çš„è±å½¢åŒºåŸŸã€‚ ç»˜åˆ¶è™šçº¿ç”¨ setLineDash æ–¹æ³•å’Œ lineDashOffsetå±æ€§æ¥åˆ¶å®šè™šçº¿æ ·å¼. setLineDash æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œæ¥æŒ‡å®šçº¿æ®µä¸é—´éš™çš„äº¤æ›¿ï¼›lineDashOffsetå±æ€§è®¾ç½®èµ·å§‹åç§»é‡ 12ctx.setLineDash([20, 5]); // [å®çº¿é•¿åº¦, é—´éš™é•¿åº¦]ctx.lineDashOffset = -0; ç»˜åˆ¶æ–‡æœ¬ ä¸¤ç§api fillText(text, x, y [, maxWidth]) åœ¨æŒ‡å®šçš„(x,y)ä½ç½®å¡«å……æŒ‡å®šçš„æ–‡æœ¬ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦æ˜¯å¯é€‰çš„. strokeText(text, x, y [, maxWidth]) åœ¨æŒ‡å®šçš„(x,y)ä½ç½®ç»˜åˆ¶æ–‡æœ¬è¾¹æ¡†ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦æ˜¯å¯é€‰çš„. 123ctx.font = &quot;100px sans-serif&quot;ctx.fillText(&quot;å¤©è‹¥æœ‰æƒ…&quot;, 10, 100);ctx.strokeText(&quot;å¤©è‹¥æœ‰æƒ…&quot;, 10, 200); ç»™æ–‡æœ¬æ·»åŠ æ ·å¼ font = value å½“å‰æˆ‘ä»¬ç”¨æ¥ç»˜åˆ¶æ–‡æœ¬çš„æ ·å¼ã€‚è¿™ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨å’Œ CSS fontå±æ€§ç›¸åŒçš„è¯­æ³•. é»˜è®¤çš„å­—ä½“æ˜¯ 10px sans-serifã€‚ textAlign = value æ–‡æœ¬å¯¹é½é€‰é¡¹. å¯é€‰çš„å€¼åŒ…æ‹¬ï¼šstart, end, left, right or center. é»˜è®¤å€¼æ˜¯ startã€‚ textBaseline = value åŸºçº¿å¯¹é½é€‰é¡¹ï¼Œå¯é€‰çš„å€¼åŒ…æ‹¬ï¼štop, hanging, middle, alphabetic, ideographic, bottomã€‚é»˜è®¤å€¼æ˜¯ alphabeticã€‚ direction = value æ–‡æœ¬æ–¹å‘ã€‚å¯èƒ½çš„å€¼åŒ…æ‹¬ï¼šltr, rtl, inheritã€‚é»˜è®¤å€¼æ˜¯ inheritã€‚ ç»˜åˆ¶å›¾ç‰‡ jsé‡é›¶åˆ›å»ºå›¾ç‰‡ jsåˆ›å»ºæ–‡æœ¬ 12const img = new Image(); // åˆ›å»ºä¸€ä¸ª&lt;img&gt;å…ƒç´ img.src = &apos;myImage.png&apos;; // è®¾ç½®å›¾ç‰‡æºåœ°å€ ç„¶åå†ç»˜åˆ¶åˆ°canva 12//å‚æ•°1ï¼šè¦ç»˜åˆ¶çš„img å‚æ•°2ã€3ï¼šç»˜åˆ¶çš„imgåœ¨canvasä¸­çš„åæ ‡ctx.drawImage(img,0,0); æ³¨æ„ï¼š è€ƒè™‘åˆ°å›¾ç‰‡æ˜¯ä»ç½‘ç»œåŠ è½½ï¼Œå¦‚æœ drawImage çš„æ—¶å€™å›¾ç‰‡è¿˜æ²¡æœ‰å®Œå…¨åŠ è½½å®Œæˆï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸ªåˆ«æµè§ˆå™¨ä¼šæŠ›å¼‚å¸¸ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä¿è¯åœ¨ img ç»˜åˆ¶å®Œæˆä¹‹åå†drawImageã€‚ 12345const img = new Image(); // åˆ›å»ºimgå…ƒç´ img.onload = function()&#123; ctx.drawImage(img, 0, 0)&#125;img.src = 'myImage.png'; // è®¾ç½®å›¾ç‰‡æºåœ°å€ ç»˜åˆ¶ img æ ‡ç­¾å…ƒç´ ä¸­çš„å›¾ç‰‡ 12var img = document.querySelector("img");ctx.drawImage(img, 0, 0); ç¼©æ”¾å›¾ç‰‡ drawImage() ä¹Ÿå¯ä»¥å†æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼š drawImage(image, x, y, width, height) è¿™ä¸ªæ–¹æ³•å¤šäº†2ä¸ªå‚æ•°ï¼šwidth å’Œ heightï¼Œè¿™ä¸¤ä¸ªå‚æ•°ç”¨æ¥æ§åˆ¶ å½“åƒcanvasç”»å…¥æ—¶åº”è¯¥ç¼©æ”¾çš„å¤§å°ã€‚ 12// å‚æ•°1ï¼šè¦ç»˜åˆ¶çš„img å‚æ•°2ã€3ï¼šç»˜åˆ¶çš„imgåœ¨canvasä¸­çš„åæ ‡ å‚æ•°4ã€5ç”»å…¥æ—¶åº”è¯¥ç¼©æ”¾çš„å¤§å°ã€‚ctx.drawImage(img, 0, 0, 400, 200); åˆ‡ç‰‡ drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) ç¬¬ä¸€ä¸ªå‚æ•°å’Œå…¶å®ƒçš„æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ä¸€ä¸ªå›¾åƒæˆ–è€…å¦ä¸€ä¸ª canvas çš„å¼•ç”¨ã€‚ å…¶ä»–8ä¸ªå‚æ•°ï¼š å‰4ä¸ªæ˜¯å®šä¹‰å›¾åƒæºçš„åˆ‡ç‰‡ä½ç½®å’Œå¤§å°ï¼Œ å4ä¸ªåˆ™æ˜¯å®šä¹‰åˆ‡ç‰‡çš„ç›®æ ‡æ˜¾ç¤ºä½ç½®å’Œå¤§å°ã€‚]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>åŸç”Ÿjs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Event Busçš„å®ç°]]></title>
    <url>%2F2018%2F06%2F15%2FeventBus%2F</url>
    <content type="text"><![CDATA[Event Busçš„å®ç° å‰è¨€Event Bus ä½¿ç”¨çš„èŒƒå›´ä¹Ÿå¾ˆå¹¿æ³›ã€‚ react vue éçˆ¶å­ç»„ä»¶å°±ç»å¸¸ç”¨Event Busè¿›è¡Œé€šä¿¡ã€‚ Node.js ä¸­çš„å¾ˆå¤šæ¨¡å—éƒ½ä¾èµ–Eventã€‚ å®ç°æ€è·¯ Event Busæ˜¯ å‘å¸ƒè®¢é˜…æ¨¡å¼ çš„å…¸å‹åº”ç”¨ã€‚ è¿™é‡Œå®ç°ä½¿ç”¨ ES6 è¯­æ³•ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š 12345678910// æ³¨å†Œä¸€ä¸ªEvent Busconst emitter = new EventEmeitter()// å¢åŠ ç›‘å¬äº‹ä»¶emitter.on(&apos;test&apos;, a =&gt; &#123; console.log(`on: $&#123;a&#125;`)&#125;)// è§¦å‘äº‹ä»¶emitter.emit(&apos;test&apos;, &apos;a=10&apos;) å‡†å¤‡å·¥ä½œ åˆ›å»ºä¸€ä¸ª EventEmeitter ç±»ã€‚ å‚æ•° maxListeners æ˜¯ ç›‘å¬è€… æœ€å¤šèƒ½ç®€å•å¤šå°‘ä¸ªäº‹ä»¶ã€‚ _events åˆ™æ˜¯ å­˜å‚¨äº‹ä»¶ çš„æ•°æ®ç»“æ„ã€‚ 1234constructor(maxListeners) &#123; this._events = new Map() this._maxListeners = (maxListeners &amp;&amp; maxListeners &gt; 0) ? maxListeners : 10&#125; 1. å­˜å‚¨äº‹ä»¶ emitter.on(type, fn) å¢åŠ ç›‘å¬äº‹ä»¶çš„æ—¶å€™ï¼Œå¿…éœ€è¦å‚¨å­˜ type å¯¹åº”çš„äº‹ä»¶ã€‚ typeå¯¹åº”çš„ äº‹ä»¶(fn) å¯èƒ½æ˜¯æœ‰å¤šä¸ªçš„ã€‚ æ‰€ä»¥åº”è¯¥ä½¿ç”¨key: valueçš„æ–¹å¼å»å­˜å‚¨ã€‚ç¬¬ä¸€æ—¶é—´å¯èƒ½æƒ³åˆ°çš„æ˜¯ å¯¹è±¡Objectã€‚è¿™é‡Œä½¿ç”¨ES6æ–°å¢çš„ Map ä½œä¸ºå­˜å‚¨ç»“æ„ã€‚Mapç”¨æ³•ä¼ é€é—¨ é‚£ä¹ˆ Map çš„ key å°±æ˜¯ typeï¼Œvalue åˆ™æ˜¯ æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢å­˜çš„æ˜¯éœ€è¦è§¦å‘çš„ å‡½æ•° ã€‚ 123456789on(type, fn) &#123; const typeFnList = this._events.get(type) if (typeFnList) &#123; if (typeFnList.length &gt;= this._maxListeners) return typeFnList.push(fn) &#125; else &#123; this._events.set(type, [fn]) &#125;&#125; 2. è§¦å‘äº‹ä»¶ emitter.emit(type, ...args) ç°åœ¨ä¸Šé¢æ‰€è¿°çš„ Map ä¸­æ‰¾å‡º type æ‰€å¯¹åº”çš„ å‡½æ•°çš„æ•°ç»„ ã€‚ å†éå†æ•°ç»„ï¼Œæ‰§è¡Œæ•°ç»„é‡Œé¢æ‰€æœ‰çš„å‡½æ•°ã€‚ è§¦å‘ç›‘å¬å‡½æ•°æˆ‘ä»¬å¯ä»¥ç”¨ apply ä¸ call ä¸¤ç§æ–¹æ³•ï¼Œåœ¨å°‘æ•°å‚æ•°æ—¶callçš„æ€§èƒ½æ›´å¥½,å¤šä¸ªå‚æ•°æ—¶applyæ€§èƒ½æ›´å¥½ï¼Œå½“å¹´Nodeçš„Eventæ¨¡å—å°±åœ¨ä¸‰ä¸ªå‚æ•°ä»¥ä¸‹ç”¨callå¦åˆ™ç”¨ applyã€‚ 1234emit(type, ...args) &#123; const typeFnList = this._events.get(type) typeFnList &amp;&amp; typeFnList.forEach(fn =&gt; fn.apply(this, args))&#125; 3. ç§»é™¤äº‹ä»¶ emitter.remove(type, fn)åŒ¿åå‡½æ•°ä¸èƒ½ç§»é™¤ï¼Œå› ä¸ºæ‰¾ä¸åˆ°å¯¹åº”çš„å†…å­˜ã€‚ æ‰¾å‡º type å¯¹åº”çš„æ•°ç»„ã€‚ æŸ¥åˆ°å‡ºå¯¹åº”å†…å­˜çš„fnï¼Œå¹¶ä»æ•°ç»„åˆ é™¤ã€‚ 123456remove(type, fn) &#123; const typeFnList = this._events.get(type) if (typeFnList &amp;&amp; typeFnList.includes(fn)) &#123; typeFnList.splice(typeFnList.findIndex(e =&gt; e === fn), 1) &#125;&#125; æ€»ç»“å¯¹Event Busçš„åŸç†æ›´åŠ äº†è§£ã€‚ å®Œæ•´çš„demoåœ¨è¿™]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>åŸç”Ÿjs</tag>
        <tag>é€ è½®å­</tag>
      </tags>
  </entry>
</search>
