<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[canvas]]></title>
    <url>%2F2018%2F12%2F30%2Fcanvas%2F</url>
    <content type="text"><![CDATA[canvasè·å–å…ƒç´ å¹¶è·å¾—2dä¸Šä¸‹æ–‡å¯¹è±¡123&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;const canvas = document.querySelector(&apos;#canvas&apos;);const ctx = canvas.getContext(&apos;2d&apos;); ä¸€äº›å‘ ä¸èƒ½ç”¨csså»æ§åˆ¶canvaså¤§å°ï¼Œä¸ç„¶ä¼šä½¿å›¾å½¢æ‹‰ä¼¸ã€‚å¯ä»¥é€šè¿‡&lt;canvas id=&#39;canvas&#39; width=&#39;500&#39; height=&#39;400&#39;&gt;&lt;/canvas&gt;ã€‚æˆ–è€…jsæ§åˆ¶ã€‚ æ …æ ¼(grid)å’Œåæ ‡ç©ºé—´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œcanvaså…ƒç´ é»˜è®¤è¢«ç½‘æ ¼æ‰€è¦†ç›–ã€‚é€šå¸¸æ¥è¯´ç½‘æ ¼ä¸­çš„ä¸€ä¸ªå•å…ƒç›¸å½“äºcanvaså…ƒç´ ä¸­çš„ä¸€åƒç´ ã€‚æ …æ ¼çš„èµ·ç‚¹ä¸ºå·¦ä¸Šè§’ï¼ˆåæ ‡ä¸ºï¼ˆ0,0ï¼‰ï¼‰ã€‚æ‰€æœ‰å…ƒç´ çš„ä½ç½®éƒ½ç›¸å¯¹äºåŸç‚¹æ¥å®šä½ã€‚æ‰€ä»¥å›¾ä¸­è“è‰²æ–¹å½¢å·¦ä¸Šè§’çš„åæ ‡ä¸ºè·ç¦»å·¦è¾¹ï¼ˆXè½´ï¼‰xåƒç´ ï¼Œè·ç¦»ä¸Šè¾¹ï¼ˆYè½´ï¼‰yåƒç´ ï¼ˆåæ ‡ä¸ºï¼ˆx,yï¼‰ï¼‰ã€‚ ç®€å•çš„çŸ©å½¢ åªæ”¯æŒä¸€ç§åŸç”Ÿçš„ å›¾å½¢ç»˜åˆ¶ï¼šçŸ©å½¢ã€‚æ‰€æœ‰å…¶ä»–å›¾å½¢éƒ½è‡³å°‘éœ€è¦ç”Ÿæˆä¸€ç§è·¯å¾„(path)ã€‚ api y, width, height)``` ç»˜åˆ¶ä¸€ä¸ªå¡«å……çš„çŸ©å½¢12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849- ```strockRect(x, y, width, height)``` ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢çš„è¾¹æ¡†- ```clearRect(x, y, widh, height)``` æ¸…é™¤æŒ‡å®šçš„çŸ©å½¢åŒºåŸŸï¼Œç„¶åè¿™å—åŒºåŸŸä¼šå˜çš„å®Œå…¨é€æ˜x, yï¼šæŒ‡çš„æ˜¯çŸ©å½¢çš„å·¦ä¸Šè§’çš„åæ ‡ã€‚(ç›¸å¯¹äºcanvasçš„åæ ‡åŸç‚¹)width, heightï¼šæŒ‡çš„æ˜¯ç»˜åˆ¶çš„çŸ©å½¢çš„å®½å’Œé«˜è¶…å‡ºèŒƒå›´ä¼šéšè—&gt; strokeRectæŠŠä¸€åƒç´ çš„è¾¹æ¡†æ¸²æŸ“æˆä¸¤åƒç´ - åƒè¿™ä¸ªç”¨canvasç»˜åˆ¶å‡ºä¸€ä¸ªæ–¹å½¢çš„æ—¶å€™ï¼Œç”±äºè®¾ç½®çš„topå€¼å’Œleftå€¼æ˜¯50pxï¼Œæ‰€ä»¥canvasä¼šåœ¨ç¬¬50å’Œç¬¬51ä¸ªåƒç´ ä¹‹é—´ä»ä¸­é—´å¼€å§‹ç»˜åˆ¶ä¸€åƒç´ çš„çº¿ï¼Œç¬¬50å’Œç¬¬51ä¸ªåƒç´ å„å 0.5åƒç´ ã€‚- è®¡ç®—æœºå¹¶ä¸èƒ½æ¸²æŸ“0.5ä¸ªåƒç´ ï¼Œæ‰€ä»¥å¯¼è‡´ç¬¬50å’Œç¬¬51ä¸ªåƒç´ éƒ½è¢«æ¸²æŸ“äº†ï¼Œæ¸²æŸ“çš„é¢œè‰²å°±æˆäº†ç°è‰²ã€‚ï¼ˆç™½åŠ é»‘ï¼šèƒŒæ™¯è‰²åŠ çº¿çš„é¢œè‰²ï¼‰&gt; è§£å†³åŠæ³•æ—¢ç„¶ä¼šå› ä¸º0.5åƒç´ çš„é—®é¢˜è€Œæ¸²æŸ“äº†ä¸¤ä¸ªåƒç´ ï¼Œé‚£ä¹ˆåœ¨è®¾ç½®topå€¼å’Œleftå€¼æ—¶ï¼Œå¢åŠ æˆ–å‡å°‘0.5åƒç´ å°±å¯ä»¥è§£å†³äº†ã€‚æƒ³ç»˜åˆ¶åœ¨ç¬¬51ä¸ªåƒç´ å°±è®¾ç½®50.5ï¼Œæƒ³ç»˜åˆ¶åœ¨ç¬¬50ä¸ªåƒç´ å°±è®¾ç½®49.5ã€‚å¦å¤–ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”»å‡ºæ¥çš„æ–¹å½¢å¤§å°åªæœ‰99*99åƒç´ ï¼Œè¦é™¤å»ä¸€è¾¹çº¿çš„å®½åº¦ã€‚### è·¯å¾„- å›¾å½¢çš„åŸºæœ¬å…ƒç´ æ˜¯è·¯å¾„ã€‚- è·¯å¾„æ˜¯é€šè¿‡ä¸åŒé¢œè‰²å’Œå®½åº¦çš„çº¿æ®µæˆ–æ›²çº¿ç›¸è¿å½¢æˆçš„ä¸åŒå½¢çŠ¶çš„ç‚¹çš„é›†åˆã€‚- ä¸€ä¸ªè·¯å¾„ï¼Œç”šè‡³ä¸€ä¸ªå­è·¯å¾„ï¼Œéƒ½æ˜¯é—­åˆçš„ã€‚&gt; ä½¿ç”¨è·¯å¾„ç»˜åˆ¶å›¾å½¢éœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤ï¼š1. åˆ›å»ºè·¯å¾„èµ·å§‹ç‚¹2. è°ƒç”¨ç»˜åˆ¶æ–¹æ³•å»ç»˜åˆ¶å‡ºè·¯å¾„3. æŠŠè·¯å¾„å°é—­4. ä¸€æ—¦è·¯å¾„ç”Ÿæˆï¼Œé€šè¿‡æè¾¹æˆ–å¡«å……è·¯å¾„åŒºåŸŸæ¥æ¸²æŸ“å›¾å½¢ã€‚&gt; éœ€è¦ç”¨åˆ°çš„api```beginPath()``` æ–°å»ºä¸€æ¡è·¯å¾„ï¼Œè·¯å¾„ä¸€æ—¦åˆ›å»ºæˆåŠŸï¼Œå›¾å½¢ç»˜åˆ¶å‘½ä»¤è¢«æŒ‡å‘åˆ°è·¯å¾„ä¸Šç”Ÿæˆè·¯å¾„```moveTo(x, y)``` æŠŠç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡(x, y)ã€‚ç›¸å½“äºè®¾ç½®è·¯å¾„çš„èµ·å§‹ç‚¹åæ ‡ã€‚```closePath()``` é—­åˆè·¯å¾„ä¹‹åï¼Œå›¾å½¢ç»˜åˆ¶å‘½ä»¤åˆé‡æ–°æŒ‡å‘åˆ°ä¸Šä¸‹æ–‡ä¸­```stroke()``` é€šè¿‡çº¿æ¡æ¥ç»˜åˆ¶å›¾å½¢è½®å»“```fill()``` é€šè¿‡å¡«å……è·¯å¾„çš„å†…å®¹åŒºåŸŸç”Ÿæˆå®å¿ƒçš„å›¾å½¢&gt; ç®€å•ä¾‹å­ ctx.beginPath(); //æ–°å»ºä¸€æ¡pathctx.moveTo(50, 50); //æŠŠç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡ctx.lineTo(200, 50); //ç»˜åˆ¶ä¸€æ¡ä»å½“å‰ä½ç½®åˆ°æŒ‡å®šåæ ‡(200, 50)çš„ç›´çº¿.//é—­åˆè·¯å¾„ã€‚ä¼šæ‹‰ä¸€æ¡ä»å½“å‰ç‚¹åˆ°pathèµ·å§‹ç‚¹çš„ç›´çº¿ã€‚å¦‚æœå½“å‰ç‚¹ä¸èµ·å§‹ç‚¹é‡åˆï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšctx.closePath();ctx.stroke(); //ç»˜åˆ¶è·¯å¾„ã€‚12&gt; ç®€å•ä¸‰è§’å½¢ä¾‹å­ ctx.beginPath();ctx.moveTo(10, 10);ctx.lineTo(10, 40);ctx.lineTo(40, 10);ctx.closePath();ctx.stroke();ctx.closePath(); //è™½ç„¶æˆ‘ä»¬åªç»˜åˆ¶äº†ä¸¤æ¡çº¿æ®µï¼Œä½†æ˜¯closePathä¼šclosePathï¼Œä»ç„¶æ˜¯ä¸€ä¸ª3è§’å½¢ctx.stroke(); //æè¾¹ã€‚strokeä¸ä¼šè‡ªåŠ¨closePath()ctx.fill(); //å¡«å……é—­åˆåŒºåŸŸã€‚å¦‚æœpathæ²¡æœ‰é—­åˆï¼Œåˆ™fill()ä¼šè‡ªåŠ¨é—­åˆè·¯å¾„123456### ç»˜åˆ¶åœ†å¼§&gt; æœ‰ä¸¤ä¸ªapi##### ```arc(x, y, r, startAngle, endAngle, anticlockwise) (x, y) ä¸ºåœ†å¿ƒï¼Œä»¥ r ä¸ºåŠå¾„ï¼Œä» startAngle å¼§åº¦å¼€å§‹åˆ° endAngle å¼§åº¦ç»“æŸã€‚anticlosewise æ˜¯å¸ƒå°”å€¼ï¼Œtrueè¡¨ç¤ºé€†æ—¶é’ˆï¼Œfalseè¡¨ç¤ºé¡ºæ—¶é’ˆã€‚(é»˜è®¤æ˜¯é¡ºæ—¶é’ˆ) æ³¨æ„ï¼šè¿™é‡Œçš„åº¦æ•°éƒ½æ˜¯å¼§åº¦ã€‚0å¼§åº¦æ˜¯æŒ‡çš„xè½´æ­£æ–¹å½¢ 12##### ```arcTo(x1, y1, x2, y2, radius) arcToæ–¹æ³•çš„è¯´æ˜ï¼š è¿™ä¸ªæ–¹æ³•å¯ä»¥è¿™æ ·ç†è§£ã€‚ç»˜åˆ¶çš„å¼§å½¢æ˜¯ç”±ä¸¤æ¡åˆ‡çº¿æ‰€å†³å®šã€‚ ç¬¬ 1 æ¡åˆ‡çº¿ï¼šèµ·å§‹ç‚¹å’Œæ§åˆ¶ç‚¹1å†³å®šçš„ç›´çº¿ã€‚ ç¬¬ 2 æ¡åˆ‡çº¿ï¼šæ§åˆ¶ç‚¹1 å’Œæ§åˆ¶ç‚¹2å†³å®šçš„ç›´çº¿ã€‚ å…¶å®ç»˜åˆ¶çš„åœ†å¼§å°±æ˜¯ä¸è¿™ä¸¤æ¡ç›´çº¿ç›¸åˆ‡çš„åœ†å¼§ã€‚ 123456ctx.beginPath();ctx.moveTo(50, 50);//å‚æ•°1ã€2ï¼šæ§åˆ¶ç‚¹1åæ ‡ å‚æ•°3ã€4ï¼šæ§åˆ¶ç‚¹2åæ ‡ å‚æ•°4ï¼šåœ†å¼§åŠå¾„ctx.arcTo(200, 50, 200, 200, 100);ctx.lineTo(200, 200)ctx.stroke(); ç»˜åˆ¶è´å¡å°”æ›²çº¿cp1y, x, y)```1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162è¯´æ˜ï¼šå‚æ•°1å’Œ2ï¼šæ§åˆ¶ç‚¹åæ ‡å‚æ•°3å’Œ4ï¼šç»“æŸç‚¹åæ ‡### æ·»åŠ æ ·å¼å’Œé¢œè‰²&gt; å¦‚æœæƒ³è¦ç»™å›¾å½¢ä¸Šè‰²ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§å¯ä»¥åšåˆ°ã€‚`fillStyle = color` è®¾ç½®å›¾å½¢çš„å¡«å……é¢œè‰²`strokeStyle = color` è®¾ç½®å›¾å½¢è½®å»“çš„é¢œè‰²1. `color` å¯ä»¥æ˜¯è¡¨ç¤º `css` é¢œè‰²å€¼çš„å­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡æˆ–è€…å›¾æ¡ˆå¯¹è±¡ã€‚2. é»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿æ¡å’Œå¡«å……é¢œè‰²éƒ½æ˜¯é»‘è‰²ã€‚3. ä¸€æ—¦æ‚¨è®¾ç½®äº† `strokeStyle` æˆ–è€… `fillStyle` çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°å€¼å°±ä¼šæˆä¸ºæ–°ç»˜åˆ¶çš„å›¾å½¢çš„é»˜è®¤å€¼ã€‚å¦‚æœä½ è¦ç»™æ¯ä¸ªå›¾å½¢ä¸Šä¸åŒçš„é¢œè‰²ï¼Œä½ éœ€è¦é‡æ–°è®¾ç½® `fillStyle` æˆ– `strokeStyle` çš„å€¼ã€‚### Transparency(é€æ˜åº¦)`globalAlpha = transparencyValue`è¿™ä¸ªå±æ€§å½±å“åˆ° canvas é‡Œæ‰€æœ‰å›¾å½¢çš„é€æ˜åº¦ï¼Œæœ‰æ•ˆçš„å€¼èŒƒå›´æ˜¯ 0.0 ï¼ˆå®Œå…¨é€æ˜ï¼‰åˆ° 1.0ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰ï¼Œé»˜è®¤æ˜¯ 1.0ã€‚globalAlpha å±æ€§åœ¨éœ€è¦ç»˜åˆ¶å¤§é‡æ‹¥æœ‰ç›¸åŒé€æ˜åº¦çš„å›¾å½¢æ—¶å€™ç›¸å½“é«˜æ•ˆã€‚ä¸è¿‡ï¼Œæˆ‘è®¤ä¸ºä½¿ç”¨rgba()è®¾ç½®é€æ˜åº¦æ›´åŠ å¥½ä¸€äº›ã€‚### line style&gt; ä¸€äº›api1. `lineWidth = value`çº¿å®½ã€‚åªèƒ½æ˜¯æ­£å€¼ã€‚é»˜è®¤æ˜¯1.0ã€‚èµ·å§‹ç‚¹å’Œç»ˆç‚¹çš„è¿çº¿ä¸ºä¸­å¿ƒï¼Œ**ä¸Šä¸‹å„å çº¿å®½çš„ä¸€åŠ**ã€‚2. `lineCap = type`çº¿æ¡æœ«ç«¯æ ·å¼ã€‚å…±æœ‰3ä¸ªå€¼ï¼š- buttï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸ- roundï¼šçº¿æ®µæœ«ç«¯ä»¥åœ†å½¢ç»“æŸ- squareï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸï¼Œä½†æ˜¯å¢åŠ äº†ä¸€ä¸ªå®½åº¦å’Œçº¿æ®µç›¸åŒï¼Œé«˜åº¦æ˜¯çº¿æ®µåšåº¦ä¸€åŠçš„çŸ©å½¢åŒºåŸŸã€‚3. `lineJoin = type`å…±æœ‰3ä¸ªå€¼`round`, `bevel` å’Œ `miter`ï¼š- `round` é€šè¿‡å¡«å……ä¸€ä¸ªé¢å¤–çš„ï¼Œåœ†å¿ƒåœ¨ç›¸è¿éƒ¨åˆ†æœ«ç«¯çš„æ‰‡å½¢ï¼Œç»˜åˆ¶æ‹è§’çš„å½¢çŠ¶ã€‚ åœ†è§’çš„åŠå¾„æ˜¯çº¿æ®µçš„å®½åº¦ã€‚- `bevel` åœ¨ç›¸è¿éƒ¨åˆ†çš„æœ«ç«¯å¡«å……ä¸€ä¸ªé¢å¤–çš„ä»¥ä¸‰è§’å½¢ä¸ºåº•çš„åŒºåŸŸï¼Œ æ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰å„è‡ªç‹¬ç«‹çš„çŸ©å½¢æ‹è§’ã€‚- `miter` (é»˜è®¤) é€šè¿‡å»¶ä¼¸ç›¸è¿éƒ¨åˆ†çš„å¤–è¾¹ç¼˜ï¼Œä½¿å…¶ç›¸äº¤äºä¸€ç‚¹ï¼Œå½¢æˆä¸€ä¸ªé¢å¤–çš„è±å½¢åŒºåŸŸã€‚### ç»˜åˆ¶è™šçº¿ç”¨ `setLineDash` æ–¹æ³•å’Œ `lineDashOffset `å±æ€§æ¥åˆ¶å®šè™šçº¿æ ·å¼. `setLineDash` æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œæ¥æŒ‡å®šçº¿æ®µä¸é—´éš™çš„äº¤æ›¿ï¼›`lineDashOffset`å±æ€§è®¾ç½®èµ·å§‹åç§»é‡ ctx.setLineDash([20, 5]); // [å®çº¿é•¿åº¦, é—´éš™é•¿åº¦]ctx.lineDashOffset = -0;1234567891011### ç»˜åˆ¶æ–‡æœ¬&gt; ä¸¤ç§api1. `fillText(text, x, y [, maxWidth])`åœ¨æŒ‡å®šçš„(x,y)ä½ç½®å¡«å……æŒ‡å®šçš„æ–‡æœ¬ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦æ˜¯å¯é€‰çš„.2. `strokeText(text, x, y [, maxWidth])`åœ¨æŒ‡å®šçš„(x,y)ä½ç½®ç»˜åˆ¶æ–‡æœ¬è¾¹æ¡†ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦æ˜¯å¯é€‰çš„. ctx.font = â€œ100px sans-serifâ€ctx.fillText(â€œå¤©è‹¥æœ‰æƒ…â€, 10, 100);ctx.strokeText(â€œå¤©è‹¥æœ‰æƒ…â€, 10, 200);12345678910111213&gt; ç»™æ–‡æœ¬æ·»åŠ æ ·å¼1. `font = value` å½“å‰æˆ‘ä»¬ç”¨æ¥ç»˜åˆ¶æ–‡æœ¬çš„æ ·å¼ã€‚è¿™ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨å’Œ CSS fontå±æ€§ç›¸åŒçš„è¯­æ³•. é»˜è®¤çš„å­—ä½“æ˜¯ 10px sans-serifã€‚2. `textAlign = value` æ–‡æœ¬å¯¹é½é€‰é¡¹. å¯é€‰çš„å€¼åŒ…æ‹¬ï¼šstart, end, left, right or center. é»˜è®¤å€¼æ˜¯ startã€‚3. `textBaseline = value` åŸºçº¿å¯¹é½é€‰é¡¹ï¼Œå¯é€‰çš„å€¼åŒ…æ‹¬ï¼štop, hanging, middle, alphabetic, ideographic, bottomã€‚é»˜è®¤å€¼æ˜¯ alphabeticã€‚4. `direction = value` æ–‡æœ¬æ–¹å‘ã€‚å¯èƒ½çš„å€¼åŒ…æ‹¬ï¼šltr, rtl, inheritã€‚é»˜è®¤å€¼æ˜¯ inheritã€‚### ç»˜åˆ¶å›¾ç‰‡&gt; jsé‡é›¶åˆ›å»ºå›¾ç‰‡jsåˆ›å»ºæ–‡æœ¬ const img = new Image(); // åˆ›å»ºä¸€ä¸ªå…ƒç´ img.src = â€˜myImage.pngâ€™; // è®¾ç½®å›¾ç‰‡æºåœ°å€12ç„¶åå†ç»˜åˆ¶åˆ°canva //å‚æ•°1ï¼šè¦ç»˜åˆ¶çš„img å‚æ•°2ã€3ï¼šç»˜åˆ¶çš„imgåœ¨canvasä¸­çš„åæ ‡ctx.drawImage(img,0,0);1234æ³¨æ„ï¼šè€ƒè™‘åˆ°å›¾ç‰‡æ˜¯ä»ç½‘ç»œåŠ è½½ï¼Œå¦‚æœ drawImage çš„æ—¶å€™å›¾ç‰‡è¿˜æ²¡æœ‰å®Œå…¨åŠ è½½å®Œæˆï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸ªåˆ«æµè§ˆå™¨ä¼šæŠ›å¼‚å¸¸ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä¿è¯åœ¨ img ç»˜åˆ¶å®Œæˆä¹‹åå†drawImageã€‚ const img = new Image(); // åˆ›å»ºimgå…ƒç´ img.onload = function(){ ctx.drawImage(img, 0, 0)}img.src = â€˜myImage.pngâ€™; // è®¾ç½®å›¾ç‰‡æºåœ°å€12&gt; ç»˜åˆ¶ img æ ‡ç­¾å…ƒç´ ä¸­çš„å›¾ç‰‡ var img = document.querySelector(â€œimgâ€);ctx.drawImage(img, 0, 0);12345678&gt; ç¼©æ”¾å›¾ç‰‡drawImage() ä¹Ÿå¯ä»¥å†æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼šdrawImage(image, x, y, width, height)è¿™ä¸ªæ–¹æ³•å¤šäº†2ä¸ªå‚æ•°ï¼šwidth å’Œ heightï¼Œè¿™ä¸¤ä¸ªå‚æ•°ç”¨æ¥æ§åˆ¶ å½“åƒcanvasç”»å…¥æ—¶åº”è¯¥ç¼©æ”¾çš„å¤§å°ã€‚ // å‚æ•°1ï¼šè¦ç»˜åˆ¶çš„img å‚æ•°2ã€3ï¼šç»˜åˆ¶çš„imgåœ¨canvasä¸­çš„åæ ‡ å‚æ•°4ã€5ç”»å…¥æ—¶åº”è¯¥ç¼©æ”¾çš„å¤§å°ã€‚ctx.drawImage(img, 0, 0, 400, 200);` åˆ‡ç‰‡ drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) ç¬¬ä¸€ä¸ªå‚æ•°å’Œå…¶å®ƒçš„æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ä¸€ä¸ªå›¾åƒæˆ–è€…å¦ä¸€ä¸ª canvas çš„å¼•ç”¨ã€‚ å…¶ä»–8ä¸ªå‚æ•°ï¼š å‰4ä¸ªæ˜¯å®šä¹‰å›¾åƒæºçš„åˆ‡ç‰‡ä½ç½®å’Œå¤§å°ï¼Œ å4ä¸ªåˆ™æ˜¯å®šä¹‰åˆ‡ç‰‡çš„ç›®æ ‡æ˜¾ç¤ºä½ç½®å’Œå¤§å°ã€‚]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>åŸç”Ÿjs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Event Busçš„å®ç°]]></title>
    <url>%2F2018%2F06%2F15%2FeventBus%2F</url>
    <content type="text"><![CDATA[Event Busçš„å®ç° å‰è¨€Event Bus ä½¿ç”¨çš„èŒƒå›´ä¹Ÿå¾ˆå¹¿æ³›ã€‚ react vue éçˆ¶å­ç»„ä»¶å°±ç»å¸¸ç”¨Event Busè¿›è¡Œé€šä¿¡ã€‚ Node.js ä¸­çš„å¾ˆå¤šæ¨¡å—éƒ½ä¾èµ–Eventã€‚ å®ç°æ€è·¯ Event Busæ˜¯ å‘å¸ƒè®¢é˜…æ¨¡å¼ çš„å…¸å‹åº”ç”¨ã€‚ è¿™é‡Œå®ç°ä½¿ç”¨ ES6 è¯­æ³•ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š 12345678910// æ³¨å†Œä¸€ä¸ªEvent Busconst emitter = new EventEmeitter()// å¢åŠ ç›‘å¬äº‹ä»¶emitter.on(&apos;test&apos;, a =&gt; &#123; console.log(`on: $&#123;a&#125;`)&#125;)// è§¦å‘äº‹ä»¶emitter.emit(&apos;test&apos;, &apos;a=10&apos;) å‡†å¤‡å·¥ä½œ åˆ›å»ºä¸€ä¸ª EventEmeitter ç±»ã€‚ å‚æ•° maxListeners æ˜¯ ç›‘å¬è€… æœ€å¤šèƒ½ç®€å•å¤šå°‘ä¸ªäº‹ä»¶ã€‚ _events åˆ™æ˜¯ å­˜å‚¨äº‹ä»¶ çš„æ•°æ®ç»“æ„ã€‚ 1234constructor(maxListeners) &#123; this._events = new Map() this._maxListeners = (maxListeners &amp;&amp; maxListeners &gt; 0) ? maxListeners : 10&#125; 1. å­˜å‚¨äº‹ä»¶ emitter.on(type, fn) å¢åŠ ç›‘å¬äº‹ä»¶çš„æ—¶å€™ï¼Œå¿…éœ€è¦å‚¨å­˜ type å¯¹åº”çš„äº‹ä»¶ã€‚ typeå¯¹åº”çš„ äº‹ä»¶(fn) å¯èƒ½æ˜¯æœ‰å¤šä¸ªçš„ã€‚ æ‰€ä»¥åº”è¯¥ä½¿ç”¨key: valueçš„æ–¹å¼å»å­˜å‚¨ã€‚ç¬¬ä¸€æ—¶é—´å¯èƒ½æƒ³åˆ°çš„æ˜¯ å¯¹è±¡Objectã€‚è¿™é‡Œä½¿ç”¨ES6æ–°å¢çš„ Map ä½œä¸ºå­˜å‚¨ç»“æ„ã€‚Mapç”¨æ³•ä¼ é€é—¨ é‚£ä¹ˆ Map çš„ key å°±æ˜¯ typeï¼Œvalue åˆ™æ˜¯ æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢å­˜çš„æ˜¯éœ€è¦è§¦å‘çš„ å‡½æ•° ã€‚ 123456789on(type, fn) &#123; const typeFnList = this._events.get(type) if (typeFnList) &#123; if (typeFnList.length &gt;= this._maxListeners) return typeFnList.push(fn) &#125; else &#123; this._events.set(type, [fn]) &#125;&#125; 2. è§¦å‘äº‹ä»¶ emitter.emit(type, ...args) ç°åœ¨ä¸Šé¢æ‰€è¿°çš„ Map ä¸­æ‰¾å‡º type æ‰€å¯¹åº”çš„ å‡½æ•°çš„æ•°ç»„ ã€‚ å†éå†æ•°ç»„ï¼Œæ‰§è¡Œæ•°ç»„é‡Œé¢æ‰€æœ‰çš„å‡½æ•°ã€‚ è§¦å‘ç›‘å¬å‡½æ•°æˆ‘ä»¬å¯ä»¥ç”¨ apply ä¸ call ä¸¤ç§æ–¹æ³•ï¼Œåœ¨å°‘æ•°å‚æ•°æ—¶callçš„æ€§èƒ½æ›´å¥½,å¤šä¸ªå‚æ•°æ—¶applyæ€§èƒ½æ›´å¥½ï¼Œå½“å¹´Nodeçš„Eventæ¨¡å—å°±åœ¨ä¸‰ä¸ªå‚æ•°ä»¥ä¸‹ç”¨callå¦åˆ™ç”¨ applyã€‚ 1234emit(type, ...args) &#123; const typeFnList = this._events.get(type) typeFnList &amp;&amp; typeFnList.forEach(fn =&gt; fn.apply(this, args))&#125; 3. ç§»é™¤äº‹ä»¶ emitter.remove(type, fn)åŒ¿åå‡½æ•°ä¸èƒ½ç§»é™¤ï¼Œå› ä¸ºæ‰¾ä¸åˆ°å¯¹åº”çš„å†…å­˜ã€‚ æ‰¾å‡º type å¯¹åº”çš„æ•°ç»„ã€‚ æŸ¥åˆ°å‡ºå¯¹åº”å†…å­˜çš„fnï¼Œå¹¶ä»æ•°ç»„åˆ é™¤ã€‚ 123456remove(type, fn) &#123; const typeFnList = this._events.get(type) if (typeFnList &amp;&amp; typeFnList.includes(fn)) &#123; typeFnList.splice(typeFnList.findIndex(e =&gt; e === fn), 1) &#125;&#125; æ€»ç»“å¯¹Event Busçš„åŸç†æ›´åŠ äº†è§£ã€‚ å®Œæ•´çš„demoåœ¨è¿™]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>åŸç”Ÿjs</tag>
        <tag>é€ è½®å­</tag>
      </tags>
  </entry>
</search>
