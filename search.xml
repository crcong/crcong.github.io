<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[nginxè§£å†³è·¨åŸŸ]]></title>
    <url>%2F2019%2F01%2F06%2Fnginx%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%2F</url>
    <content type="text"><![CDATA[nginxåå‘ä»£ç†è§£å†³è·¨åŸŸå‰è¨€ç°åœ¨çš„é¡¹ç›®å¤§éƒ¨åˆ†éƒ½å˜æˆå‰åç«¯åˆ†ç¦»ï¼Œå‰åç«¯é¡¹ç›®åˆ†å¼€å¼€å‘ï¼Œå°¤å…¶æ˜¯å•é¡µé¢åº”ç”¨ï¼Œå‰ç«¯ä»£ç ä¼šå¼€å¯å•ç‹¬çš„æœåŠ¡å™¨ï¼Œè‹¥ç›´æ¥åœ¨å‰ç«¯é¡¹ç›®ä¸­è®¿é—®åç«¯çš„æ¥å£ï¼Œè‚¯å®šä¼šé‡åˆ°å› è·¨åŸŸä¸èƒ½è®¿é—®çš„é—®é¢˜ã€‚ è·¨åŸŸçš„å¸¸è§è§£å†³æ–¹æ³• jsonp cors éœ€è¦æœåŠ¡å™¨è®¾ç½®header Access-Control-Allow-Origin html5 postMessage+iframe nginxåå‘ä»£ç† å®ç°æ–¹æ³•æˆ‘ä»¬åªéœ€è¦é…ç½®nginxï¼Œåœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šé…ç½®å¤šä¸ªå‰ç¼€æ¥è½¬å‘http/httpsè¯·æ±‚åˆ°å¤šä¸ªçœŸå®çš„æœåŠ¡å™¨å³å¯ã€‚è¿™æ ·ï¼Œè¿™ä¸ªæœåŠ¡å™¨ä¸Šæ‰€æœ‰urléƒ½æ˜¯ç›¸åŒçš„åŸŸåã€åè®®å’Œç«¯å£ã€‚ æ¯”å¦‚æ¥å£çš„å‰ç¼€æ˜¯ /api/ æˆ‘ä»¬å¯ä»¥å†™å¤šä¸€ä¸ªlocationï¼Œæ‹¦æˆªapiï¼Œå»åå‘ä»£ç†æ¥å£æœåŠ¡å™¨ã€‚ 1234567location /api/ &#123; # æ‰€æœ‰å¯¹åç«¯çš„è¯·æ±‚åŠ ä¸€ä¸ªapiå‰ç¼€æ–¹ä¾¿åŒºåˆ†ï¼ŒçœŸæ­£è®¿é—®çš„æ—¶å€™ç§»é™¤è¿™ä¸ªå‰ç¼€ # é‡å†™urlï¼ŒæŠŠ/api/è¿‡æ»¤æ‰ rewrite ^/api/(.*)$ /$1 break; # API Server proxy_pass http://www.apiServer.com; #å°†çœŸæ­£çš„è¯·æ±‚ä»£ç†åˆ°apiServer,å³çœŸå®çš„æœåŠ¡å™¨åœ°å€ï¼Œajaxçš„urlä¸º/api/user/1çš„è¯·æ±‚å°†ä¼šè®¿é—®http://www.apiServer.com/user/1&#125;]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>nginx</tag>
        <tag>å‰ç«¯</tag>
        <tag>è·¨åŸŸ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginxåŸºç¡€]]></title>
    <url>%2F2019%2F01%2F01%2Fnginx%2F</url>
    <content type="text"><![CDATA[nginx â€œNginxæ˜¯ä¸€æ¬¾è½»é‡çº§çš„HTTPæœåŠ¡å™¨ï¼Œé‡‡ç”¨äº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥éé˜»å¡å¤„ç†æ–¹å¼æ¡†æ¶ï¼Œè¿™è®©å…¶å…·æœ‰æå¥½çš„IOæ€§èƒ½ï¼Œæ—¶å¸¸ç”¨äºæœåŠ¡ç«¯çš„åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡ã€‚â€ åŸºæœ¬æ“ä½œåœæ­¢nginx nginx -s stop nginx -s quit killall nginx é‡å¯nginx nginx -s reload åœæ­¢æœåŠ¡ systemctl stop nginx.service é‡å¯æœåŠ¡ systemctl restart nginx.service æŸ¥çœ‹ç«¯å£å· åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒNginxå¯åŠ¨åä¼šç›‘å¬80ç«¯å£ï¼Œä»è€Œæä¾›HTTPè®¿é—®ï¼Œå¦‚æœ80ç«¯å£å·²ç»è¢«å ç”¨åˆ™ä¼šå¯åŠ¨å¤±è´¥ã€‚æˆ‘ä¹ˆå¯ä»¥ä½¿ç”¨ netstat -tlnp å‘½ä»¤æŸ¥çœ‹ç«¯å£å·çš„å ç”¨æƒ…å†µã€‚ é…ç½®æ–‡ä»¶(nginx.conf) nginx.confæ–‡ä»¶æ˜¯Nginxæ€»é…ç½®æ–‡ä»¶ï¼Œåœ¨æˆ‘ä»¬æ­å»ºæœåŠ¡å™¨æ—¶ç»å¸¸è°ƒæ•´çš„æ–‡ä»¶ã€‚ ä¸‹é¢æ˜¯æ–‡ä»¶çš„è¯¦ç»†æ³¨é‡Š 12345678910111213141516171819202122232425#è¿è¡Œç”¨æˆ·ï¼Œé»˜è®¤å³æ˜¯nginxï¼Œå¯ä»¥ä¸è¿›è¡Œè®¾ç½®user nginx;#Nginxè¿›ç¨‹ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºå’ŒCPUæ ¸æ•°ä¸€æ ·worker_processes 1;#é”™è¯¯æ—¥å¿—å­˜æ”¾ç›®å½•error_log /var/log/nginx/error.log warn;#è¿›ç¨‹pidå­˜æ”¾ä½ç½®pid /var/run/nginx.pid;events &#123; worker_connections 1024; # å•ä¸ªåå°è¿›ç¨‹çš„æœ€å¤§å¹¶å‘æ•°&#125;http &#123; include /etc/nginx/mime.types; #æ–‡ä»¶æ‰©å±•åä¸ç±»å‹æ˜ å°„è¡¨ default_type application/octet-stream; #é»˜è®¤æ–‡ä»¶ç±»å‹ #è®¾ç½®æ—¥å¿—æ¨¡å¼ log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos; &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; access_log /var/log/nginx/access.log main; #nginxè®¿é—®æ—¥å¿—å­˜æ”¾ä½ç½® sendfile on; #å¼€å¯é«˜æ•ˆä¼ è¾“æ¨¡å¼ #tcp_nopush on; #å‡å°‘ç½‘ç»œæŠ¥æ–‡æ®µçš„æ•°é‡ keepalive_timeout 65; #ä¿æŒè¿æ¥çš„æ—¶é—´ï¼Œä¹Ÿå«è¶…æ—¶æ—¶é—´ #gzip on; #å¼€å¯gzipå‹ç¼© include ./include/*; #åŒ…å«çš„å­é…ç½®é¡¹ä½ç½®å’Œæ–‡ä»¶ï¼Œå› ä¸ºæ‰€æœ‰çš„æœ€å¥½ä¸è¦å…¨å†™åœ¨è¿™é‡Œï¼Œå®¹æ˜“ç®¡ç†ã€‚&#125; locationé…ç½®è¯­æ³•è§„åˆ™ï¼šlocation [=|~|~*|^~] /uri/ { â€¦ } = å¼€å¤´è¡¨ç¤ºç²¾ç¡®åŒ¹é… ^~ å¼€å¤´è¡¨ç¤ºuriä»¥æŸä¸ªå¸¸è§„å­—ç¬¦ä¸²å¼€å¤´ï¼Œç†è§£ä¸ºåŒ¹é… urlè·¯å¾„å³å¯ã€‚ ~ å¼€å¤´è¡¨ç¤ºåŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é… ~* å¼€å¤´è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é… !~ å’Œ !~*åˆ†åˆ«ä¸ºåŒºåˆ†å¤§å°å†™ä¸åŒ¹é…åŠä¸åŒºåˆ†å¤§å°å†™ä¸åŒ¹é… çš„æ­£åˆ™ / é€šç”¨åŒ¹é…ï¼Œä»»ä½•è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ°ã€‚ 12345678910111213141516171819202122232425location = / &#123; #è§„åˆ™A&#125;location = /login &#123; #è§„åˆ™B&#125;location ^~ /static/ &#123; #è§„åˆ™C&#125;location ~ \.(gif|jpg|png|js|css)$ &#123; #è§„åˆ™D&#125;location ~* \.png$ &#123; #è§„åˆ™E&#125;location !~ \.xhtml$ &#123; #è§„åˆ™F&#125;location !~* \.xhtml$ &#123; #è§„åˆ™G&#125;location / &#123; #è§„åˆ™H&#125; é‚£ä¹ˆäº§ç”Ÿçš„æ•ˆæœå¦‚ä¸‹ï¼š è®¿é—®æ ¹ç›®å½•/ï¼Œ æ¯”å¦‚ http://localhost/ å°†åŒ¹é…è§„åˆ™A è®¿é—® http://localhost/login å°†åŒ¹é…è§„åˆ™Bï¼Œhttp://localhost/register åˆ™åŒ¹é…è§„åˆ™H è®¿é—® http://localhost/static/a.html å°†åŒ¹é…è§„åˆ™C è®¿é—® http://localhost/a.gif, http://localhost/b.jpg å°†åŒ¹é…è§„åˆ™Då’Œè§„åˆ™Eï¼Œä½†æ˜¯è§„åˆ™Dé¡ºåºä¼˜å…ˆï¼Œè§„åˆ™Eä¸èµ·ä½œç”¨ï¼Œè€Œ http://localhost/static/c.png åˆ™ä¼˜å…ˆåŒ¹é…åˆ° è§„åˆ™C è®¿é—® http://localhost/a.PNG åˆ™åŒ¹é…è§„åˆ™Eï¼Œ è€Œä¸ä¼šåŒ¹é…è§„åˆ™Dï¼Œå› ä¸ºè§„åˆ™Eä¸åŒºåˆ†å¤§å°å†™ã€‚ è®¿é—® http://localhost/a.xhtml ï¼Œä¸ä¼šåŒ¹é…è§„åˆ™Få’Œè§„åˆ™Gï¼Œhttp://localhost/a.XHTMLä¸ä¼šåŒ¹é…è§„åˆ™Gï¼Œå› ä¸ºä¸åŒºåˆ†å¤§å°å†™ã€‚è§„åˆ™Fï¼Œè§„åˆ™Gå±äºæ’é™¤æ³•ï¼Œç¬¦åˆåŒ¹é…è§„åˆ™ä½†æ˜¯ä¸ä¼šåŒ¹é…åˆ°ï¼Œæ‰€ä»¥æƒ³æƒ³çœ‹å®é™…åº”ç”¨ä¸­å“ªé‡Œä¼šç”¨åˆ°ã€‚ è®¿é—® http://localhost/category/id/1111 åˆ™æœ€ç»ˆåŒ¹é…åˆ°è§„åˆ™Hï¼Œå› ä¸ºä»¥ä¸Šè§„åˆ™éƒ½ä¸åŒ¹é…ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥æ˜¯nginxè½¬å‘è¯·æ±‚ç»™åç«¯åº”ç”¨æœåŠ¡å™¨ï¼Œæ¯”å¦‚FastCGIï¼ˆphpï¼‰ï¼Œtomcatï¼ˆjspï¼‰ï¼Œnginxä½œä¸ºæ–¹å‘ä»£ç†æœåŠ¡å™¨å­˜åœ¨ã€‚ è®¿é—®æƒé™åœ¨åŒä¸€ä¸ªå—ä¸‹çš„ä¸¤ä¸ªæƒé™æŒ‡ä»¤ï¼Œå…ˆå‡ºç°çš„è®¾ç½®ä¼šè¦†ç›–åå‡ºç°çš„è®¾ç½®ï¼ˆä¹Ÿå°±æ˜¯è°å…ˆè§¦å‘ï¼Œè°èµ·ä½œç”¨ï¼‰ã€‚å³deny allä¹‹åï¼Œallowè°éƒ½æ²¡ç”¨ã€‚ 1234location / &#123; deny 192.168.1.23; # ç¦æ­¢è®¿é—® allow 192.168.1.23; # å…è®¸è®¿é—®&#125; åŸºäºç«¯å£å·é…ç½®è™šæ‹Ÿä¸»æœº åŸºäºç«¯å£å·æ¥é…ç½®è™šæ‹Ÿä¸»æœºï¼Œç®—æ˜¯Nginxä¸­æœ€ç®€å•çš„ä¸€ç§æ–¹å¼äº†ã€‚åŸç†å°±æ˜¯Nginxç›‘å¬å¤šä¸ªç«¯å£ï¼Œæ ¹æ®ä¸åŒçš„ç«¯å£å·ï¼Œæ¥åŒºåˆ†ä¸åŒçš„ç½‘ç«™ã€‚ 123456server &#123; listen 8001; # ç«¯å£ server_name localhost; # åŸŸå root /usr/share/nginx/html/html8001; # è·¯å¾„ index index.html;&#125; åŸºäºåŸŸåè®¾ç½®è™šæ‹Ÿä¸»æœº12345678server&#123; listen 80; # ç«¯å£ server_name www.crcong.cn; # åŸŸå location / &#123; root /www.crcong.cn; index index.html index.htm; &#125;&#125; åå‘ä»£ç† proxy_pass æ —å­è®¿é—® www.crcong.cn å°±ä¼šä»£ç†åˆ° 127.0.0.1:3000 1234567server&#123; listen 80; server_name www.crcong.cn; location / &#123; proxy_pass 127.0.0.1:3000; &#125;&#125; å…¶ä»–ä»£ç†æŒ‡ä»¤ proxy_set_header :åœ¨å°†å®¢æˆ·ç«¯è¯·æ±‚å‘é€ç»™åç«¯æœåŠ¡å™¨ä¹‹å‰ï¼Œæ›´æ”¹æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚å¤´ä¿¡æ¯ã€‚ proxy_connect_timeout:é…ç½®Nginxä¸åç«¯ä»£ç†æœåŠ¡å™¨å°è¯•å»ºç«‹è¿æ¥çš„è¶…æ—¶æ—¶é—´ã€‚ proxy_read_timeout : é…ç½®Nginxå‘åç«¯æœåŠ¡å™¨ç»„å‘å‡ºreadè¯·æ±‚åï¼Œç­‰å¾…ç›¸åº”çš„è¶…æ—¶æ—¶é—´ã€‚ proxy_send_timeoutï¼šé…ç½®Nginxå‘åç«¯æœåŠ¡å™¨ç»„å‘å‡ºwriteè¯·æ±‚åï¼Œç­‰å¾…ç›¸åº”çš„è¶…æ—¶æ—¶é—´ã€‚ proxy_redirect :ç”¨äºä¿®æ”¹åç«¯æœåŠ¡å™¨è¿”å›çš„å“åº”å¤´ä¸­çš„Locationå’ŒRefreshã€‚ gzip gzipæ˜¯ç½‘é¡µçš„ä¸€ç§ç½‘é¡µå‹ç¼©æŠ€æœ¯ï¼Œç»è¿‡gzipå‹ç¼©åï¼Œé¡µé¢å¤§å°å¯ä»¥å˜ä¸ºåŸæ¥çš„30%ç”šè‡³æ›´å°ã€‚æ›´å°çš„ç½‘é¡µä¼šè®©ç”¨æˆ·æµè§ˆçš„ä½“éªŒæ›´å¥½ï¼Œé€Ÿåº¦æ›´å¿«ã€‚gzipç½‘é¡µå‹ç¼©çš„å®ç°éœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„æ”¯æŒã€‚ ç®€å•å¼€å¯æ–¹å¼123456http &#123; ..... gzip on; gzip_types text/plain application/javascript text/css; # å‹ç¼©æ–‡æœ¬ã€JavaScriptå’Œcss .....&#125; å…¶ä»–æŒ‡ä»¤ gzip : è¯¥æŒ‡ä»¤ç”¨äºå¼€å¯æˆ– å…³é—­gzipæ¨¡å—ã€‚ gzip_buffers : è®¾ç½®ç³»ç»Ÿè·å–å‡ ä¸ªå•ä½çš„ç¼“å­˜ç”¨äºå­˜å‚¨gzipçš„å‹ç¼©ç»“æœæ•°æ®æµã€‚ gzip_comp_level : gzipå‹ç¼©æ¯”ï¼Œå‹ç¼©çº§åˆ«æ˜¯1-9ï¼Œ1çš„å‹ç¼©çº§åˆ«æœ€ä½ï¼Œ9çš„å‹ç¼©çº§åˆ«æœ€é«˜ã€‚å‹ç¼©çº§åˆ«è¶Šé«˜å‹ç¼©ç‡è¶Šå¤§ï¼Œå‹ç¼©æ—¶é—´è¶Šé•¿ã€‚ gzip_disable : å¯ä»¥é€šè¿‡è¯¥æŒ‡ä»¤å¯¹ä¸€äº›ç‰¹å®šçš„User-Agentä¸ä½¿ç”¨å‹ç¼©åŠŸèƒ½ã€‚ gzip_min_length:è®¾ç½®å…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°ï¼Œé¡µé¢å­—èŠ‚æ•°ä»ç›¸åº”æ¶ˆæ¯å¤´çš„Content-lengthä¸­è¿›è¡Œè·å–ã€‚ gzip_http_versionï¼šè¯†åˆ«HTTPåè®®ç‰ˆæœ¬ï¼Œå…¶å€¼å¯ä»¥æ˜¯1.1.æˆ–1.0. gzip_proxied : ç”¨äºè®¾ç½®å¯ç”¨æˆ–ç¦ç”¨ä»ä»£ç†æœåŠ¡å™¨ä¸Šæ”¶åˆ°ç›¸åº”å†…å®¹gzipå‹ç¼©ã€‚ gzip_vary : ç”¨äºåœ¨å“åº”æ¶ˆæ¯å¤´ä¸­æ·»åŠ Varyï¼šAccept-Encoding,ä½¿ä»£ç†æœåŠ¡å™¨æ ¹æ®è¯·æ±‚å¤´ä¸­çš„Accept-Encodingè¯†åˆ«æ˜¯å¦å¯ç”¨gzipå‹ç¼©ã€‚]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[canvas]]></title>
    <url>%2F2018%2F12%2F30%2Fcanvas%2F</url>
    <content type="text"><![CDATA[canvasè·å–å…ƒç´ å¹¶è·å¾—2dä¸Šä¸‹æ–‡å¯¹è±¡123&lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt;const canvas = document.querySelector(&apos;#canvas&apos;);const ctx = canvas.getContext(&apos;2d&apos;); ä¸€äº›å‘ ä¸èƒ½ç”¨csså»æ§åˆ¶canvaså¤§å°ï¼Œä¸ç„¶ä¼šä½¿å›¾å½¢æ‹‰ä¼¸ã€‚å¯ä»¥é€šè¿‡&lt;canvas id=&#39;canvas&#39; width=&#39;500&#39; height=&#39;400&#39;&gt;&lt;/canvas&gt;ã€‚æˆ–è€…jsæ§åˆ¶ã€‚ æ …æ ¼(grid)å’Œåæ ‡ç©ºé—´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œcanvaså…ƒç´ é»˜è®¤è¢«ç½‘æ ¼æ‰€è¦†ç›–ã€‚é€šå¸¸æ¥è¯´ç½‘æ ¼ä¸­çš„ä¸€ä¸ªå•å…ƒç›¸å½“äºcanvaså…ƒç´ ä¸­çš„ä¸€åƒç´ ã€‚æ …æ ¼çš„èµ·ç‚¹ä¸ºå·¦ä¸Šè§’ï¼ˆåæ ‡ä¸ºï¼ˆ0,0ï¼‰ï¼‰ã€‚æ‰€æœ‰å…ƒç´ çš„ä½ç½®éƒ½ç›¸å¯¹äºåŸç‚¹æ¥å®šä½ã€‚æ‰€ä»¥å›¾ä¸­è“è‰²æ–¹å½¢å·¦ä¸Šè§’çš„åæ ‡ä¸ºè·ç¦»å·¦è¾¹ï¼ˆXè½´ï¼‰xåƒç´ ï¼Œè·ç¦»ä¸Šè¾¹ï¼ˆYè½´ï¼‰yåƒç´ ï¼ˆåæ ‡ä¸ºï¼ˆx,yï¼‰ï¼‰ã€‚ ç®€å•çš„çŸ©å½¢canvas åªæ”¯æŒä¸€ç§åŸç”Ÿçš„ å›¾å½¢ç»˜åˆ¶ï¼šçŸ©å½¢ã€‚æ‰€æœ‰å…¶ä»–å›¾å½¢éƒ½è‡³å°‘éœ€è¦ç”Ÿæˆä¸€ç§è·¯å¾„(path)ã€‚ api fillRect(x, y, width, height) ç»˜åˆ¶ä¸€ä¸ªå¡«å……çš„çŸ©å½¢ strockRect(x, y, width, height) ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢çš„è¾¹æ¡† clearRect(x, y, widh, height) æ¸…é™¤æŒ‡å®šçš„çŸ©å½¢åŒºåŸŸï¼Œç„¶åè¿™å—åŒºåŸŸä¼šå˜çš„å®Œå…¨é€æ˜ x, yï¼šæŒ‡çš„æ˜¯çŸ©å½¢çš„å·¦ä¸Šè§’çš„åæ ‡ã€‚(ç›¸å¯¹äºcanvasçš„åæ ‡åŸç‚¹) width, heightï¼šæŒ‡çš„æ˜¯ç»˜åˆ¶çš„çŸ©å½¢çš„å®½å’Œé«˜ è¶…å‡ºèŒƒå›´ä¼šéšè— strokeRectæŠŠä¸€åƒç´ çš„è¾¹æ¡†æ¸²æŸ“æˆä¸¤åƒç´  åƒè¿™ä¸ªç”¨canvasç»˜åˆ¶å‡ºä¸€ä¸ªæ–¹å½¢çš„æ—¶å€™ï¼Œç”±äºè®¾ç½®çš„topå€¼å’Œleftå€¼æ˜¯50pxï¼Œæ‰€ä»¥canvasä¼šåœ¨ç¬¬50å’Œç¬¬51ä¸ªåƒç´ ä¹‹é—´ä»ä¸­é—´å¼€å§‹ç»˜åˆ¶ä¸€åƒç´ çš„çº¿ï¼Œç¬¬50å’Œç¬¬51ä¸ªåƒç´ å„å 0.5åƒç´ ã€‚ è®¡ç®—æœºå¹¶ä¸èƒ½æ¸²æŸ“0.5ä¸ªåƒç´ ï¼Œæ‰€ä»¥å¯¼è‡´ç¬¬50å’Œç¬¬51ä¸ªåƒç´ éƒ½è¢«æ¸²æŸ“äº†ï¼Œæ¸²æŸ“çš„é¢œè‰²å°±æˆäº†ç°è‰²ã€‚ï¼ˆç™½åŠ é»‘ï¼šèƒŒæ™¯è‰²åŠ çº¿çš„é¢œè‰²ï¼‰ è§£å†³åŠæ³• æ—¢ç„¶ä¼šå› ä¸º0.5åƒç´ çš„é—®é¢˜è€Œæ¸²æŸ“äº†ä¸¤ä¸ªåƒç´ ï¼Œé‚£ä¹ˆåœ¨è®¾ç½®topå€¼å’Œleftå€¼æ—¶ï¼Œå¢åŠ æˆ–å‡å°‘0.5åƒç´ å°±å¯ä»¥è§£å†³äº†ã€‚æƒ³ç»˜åˆ¶åœ¨ç¬¬51ä¸ªåƒç´ å°±è®¾ç½®50.5ï¼Œæƒ³ç»˜åˆ¶åœ¨ç¬¬50ä¸ªåƒç´ å°±è®¾ç½®49.5ã€‚ å¦å¤–ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”»å‡ºæ¥çš„æ–¹å½¢å¤§å°åªæœ‰99*99åƒç´ ï¼Œè¦é™¤å»ä¸€è¾¹çº¿çš„å®½åº¦ã€‚ è·¯å¾„ å›¾å½¢çš„åŸºæœ¬å…ƒç´ æ˜¯è·¯å¾„ã€‚ è·¯å¾„æ˜¯é€šè¿‡ä¸åŒé¢œè‰²å’Œå®½åº¦çš„çº¿æ®µæˆ–æ›²çº¿ç›¸è¿å½¢æˆçš„ä¸åŒå½¢çŠ¶çš„ç‚¹çš„é›†åˆã€‚ ä¸€ä¸ªè·¯å¾„ï¼Œç”šè‡³ä¸€ä¸ªå­è·¯å¾„ï¼Œéƒ½æ˜¯é—­åˆçš„ã€‚ ä½¿ç”¨è·¯å¾„ç»˜åˆ¶å›¾å½¢éœ€è¦ä¸€äº›é¢å¤–çš„æ­¥éª¤ï¼š åˆ›å»ºè·¯å¾„èµ·å§‹ç‚¹ è°ƒç”¨ç»˜åˆ¶æ–¹æ³•å»ç»˜åˆ¶å‡ºè·¯å¾„ æŠŠè·¯å¾„å°é—­ ä¸€æ—¦è·¯å¾„ç”Ÿæˆï¼Œé€šè¿‡æè¾¹æˆ–å¡«å……è·¯å¾„åŒºåŸŸæ¥æ¸²æŸ“å›¾å½¢ã€‚ éœ€è¦ç”¨åˆ°çš„api beginPath() æ–°å»ºä¸€æ¡è·¯å¾„ï¼Œè·¯å¾„ä¸€æ—¦åˆ›å»ºæˆåŠŸï¼Œå›¾å½¢ç»˜åˆ¶å‘½ä»¤è¢«æŒ‡å‘åˆ°è·¯å¾„ä¸Šç”Ÿæˆè·¯å¾„ moveTo(x, y) æŠŠç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡(x, y)ã€‚ç›¸å½“äºè®¾ç½®è·¯å¾„çš„èµ·å§‹ç‚¹åæ ‡ã€‚ closePath() é—­åˆè·¯å¾„ä¹‹åï¼Œå›¾å½¢ç»˜åˆ¶å‘½ä»¤åˆé‡æ–°æŒ‡å‘åˆ°ä¸Šä¸‹æ–‡ä¸­ stroke() é€šè¿‡çº¿æ¡æ¥ç»˜åˆ¶å›¾å½¢è½®å»“ fill() é€šè¿‡å¡«å……è·¯å¾„çš„å†…å®¹åŒºåŸŸç”Ÿæˆå®å¿ƒçš„å›¾å½¢ ç®€å•ä¾‹å­ 123456ctx.beginPath(); //æ–°å»ºä¸€æ¡pathctx.moveTo(50, 50); //æŠŠç”»ç¬”ç§»åŠ¨åˆ°æŒ‡å®šçš„åæ ‡ctx.lineTo(200, 50); //ç»˜åˆ¶ä¸€æ¡ä»å½“å‰ä½ç½®åˆ°æŒ‡å®šåæ ‡(200, 50)çš„ç›´çº¿.//é—­åˆè·¯å¾„ã€‚ä¼šæ‹‰ä¸€æ¡ä»å½“å‰ç‚¹åˆ°pathèµ·å§‹ç‚¹çš„ç›´çº¿ã€‚å¦‚æœå½“å‰ç‚¹ä¸èµ·å§‹ç‚¹é‡åˆï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšctx.closePath();ctx.stroke(); //ç»˜åˆ¶è·¯å¾„ã€‚ ç®€å•ä¸‰è§’å½¢ä¾‹å­ 123456789ctx.beginPath();ctx.moveTo(10, 10);ctx.lineTo(10, 40);ctx.lineTo(40, 10);ctx.closePath();ctx.stroke();ctx.closePath(); //è™½ç„¶æˆ‘ä»¬åªç»˜åˆ¶äº†ä¸¤æ¡çº¿æ®µï¼Œä½†æ˜¯closePathä¼šclosePathï¼Œä»ç„¶æ˜¯ä¸€ä¸ª3è§’å½¢ctx.stroke(); //æè¾¹ã€‚strokeä¸ä¼šè‡ªåŠ¨closePath()ctx.fill(); //å¡«å……é—­åˆåŒºåŸŸã€‚å¦‚æœpathæ²¡æœ‰é—­åˆï¼Œåˆ™fill()ä¼šè‡ªåŠ¨é—­åˆè·¯å¾„ ç»˜åˆ¶åœ†å¼§ æœ‰ä¸¤ä¸ªapi arc(x, y, r, startAngle, endAngle, anticlockwise)(x, y) ä¸ºåœ†å¿ƒï¼Œä»¥ r ä¸ºåŠå¾„ï¼Œä» startAngle å¼§åº¦å¼€å§‹åˆ° endAngle å¼§åº¦ç»“æŸã€‚anticlosewise æ˜¯å¸ƒå°”å€¼ï¼Œtrueè¡¨ç¤ºé€†æ—¶é’ˆï¼Œfalseè¡¨ç¤ºé¡ºæ—¶é’ˆã€‚(é»˜è®¤æ˜¯é¡ºæ—¶é’ˆ) æ³¨æ„ï¼šè¿™é‡Œçš„åº¦æ•°éƒ½æ˜¯å¼§åº¦ã€‚0å¼§åº¦æ˜¯æŒ‡çš„xè½´æ­£æ–¹å½¢ radians = (Math.PI / 180) * degrees; //è§’åº¦è½¬æ¢æˆå¼§åº¦ arcTo(x1, y1, x2, y2, radius)arcToæ–¹æ³•çš„è¯´æ˜ï¼š è¿™ä¸ªæ–¹æ³•å¯ä»¥è¿™æ ·ç†è§£ã€‚ç»˜åˆ¶çš„å¼§å½¢æ˜¯ç”±ä¸¤æ¡åˆ‡çº¿æ‰€å†³å®šã€‚ ç¬¬ 1 æ¡åˆ‡çº¿ï¼šèµ·å§‹ç‚¹å’Œæ§åˆ¶ç‚¹1å†³å®šçš„ç›´çº¿ã€‚ ç¬¬ 2 æ¡åˆ‡çº¿ï¼šæ§åˆ¶ç‚¹1 å’Œæ§åˆ¶ç‚¹2å†³å®šçš„ç›´çº¿ã€‚ å…¶å®ç»˜åˆ¶çš„åœ†å¼§å°±æ˜¯ä¸è¿™ä¸¤æ¡ç›´çº¿ç›¸åˆ‡çš„åœ†å¼§ã€‚ 123456ctx.beginPath();ctx.moveTo(50, 50);//å‚æ•°1ã€2ï¼šæ§åˆ¶ç‚¹1åæ ‡ å‚æ•°3ã€4ï¼šæ§åˆ¶ç‚¹2åæ ‡ å‚æ•°4ï¼šåœ†å¼§åŠå¾„ctx.arcTo(200, 50, 200, 200, 100);ctx.lineTo(200, 200)ctx.stroke(); ç»˜åˆ¶è´å¡å°”æ›²çº¿quadraticCurveTo(cp1x, cp1y, x, y) è¯´æ˜ï¼š å‚æ•°1å’Œ2ï¼šæ§åˆ¶ç‚¹åæ ‡ å‚æ•°3å’Œ4ï¼šç»“æŸç‚¹åæ ‡ æ·»åŠ æ ·å¼å’Œé¢œè‰² å¦‚æœæƒ³è¦ç»™å›¾å½¢ä¸Šè‰²ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§å¯ä»¥åšåˆ°ã€‚ fillStyle = color è®¾ç½®å›¾å½¢çš„å¡«å……é¢œè‰² strokeStyle = color è®¾ç½®å›¾å½¢è½®å»“çš„é¢œè‰² color å¯ä»¥æ˜¯è¡¨ç¤º css é¢œè‰²å€¼çš„å­—ç¬¦ä¸²ã€æ¸å˜å¯¹è±¡æˆ–è€…å›¾æ¡ˆå¯¹è±¡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿æ¡å’Œå¡«å……é¢œè‰²éƒ½æ˜¯é»‘è‰²ã€‚ ä¸€æ—¦æ‚¨è®¾ç½®äº† strokeStyle æˆ–è€… fillStyle çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°å€¼å°±ä¼šæˆä¸ºæ–°ç»˜åˆ¶çš„å›¾å½¢çš„é»˜è®¤å€¼ã€‚å¦‚æœä½ è¦ç»™æ¯ä¸ªå›¾å½¢ä¸Šä¸åŒçš„é¢œè‰²ï¼Œä½ éœ€è¦é‡æ–°è®¾ç½® fillStyle æˆ– strokeStyle çš„å€¼ã€‚ Transparency(é€æ˜åº¦)globalAlpha = transparencyValue è¿™ä¸ªå±æ€§å½±å“åˆ° canvas é‡Œæ‰€æœ‰å›¾å½¢çš„é€æ˜åº¦ï¼Œæœ‰æ•ˆçš„å€¼èŒƒå›´æ˜¯ 0.0 ï¼ˆå®Œå…¨é€æ˜ï¼‰åˆ° 1.0ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰ï¼Œé»˜è®¤æ˜¯ 1.0ã€‚ globalAlpha å±æ€§åœ¨éœ€è¦ç»˜åˆ¶å¤§é‡æ‹¥æœ‰ç›¸åŒé€æ˜åº¦çš„å›¾å½¢æ—¶å€™ç›¸å½“é«˜æ•ˆã€‚ä¸è¿‡ï¼Œæˆ‘è®¤ä¸ºä½¿ç”¨rgba()è®¾ç½®é€æ˜åº¦æ›´åŠ å¥½ä¸€äº›ã€‚ line style ä¸€äº›api lineWidth = value çº¿å®½ã€‚åªèƒ½æ˜¯æ­£å€¼ã€‚é»˜è®¤æ˜¯1.0ã€‚ èµ·å§‹ç‚¹å’Œç»ˆç‚¹çš„è¿çº¿ä¸ºä¸­å¿ƒï¼Œä¸Šä¸‹å„å çº¿å®½çš„ä¸€åŠã€‚ lineCap = type çº¿æ¡æœ«ç«¯æ ·å¼ã€‚ å…±æœ‰3ä¸ªå€¼ï¼š buttï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸ roundï¼šçº¿æ®µæœ«ç«¯ä»¥åœ†å½¢ç»“æŸ squareï¼šçº¿æ®µæœ«ç«¯ä»¥æ–¹å½¢ç»“æŸï¼Œä½†æ˜¯å¢åŠ äº†ä¸€ä¸ªå®½åº¦å’Œçº¿æ®µç›¸åŒï¼Œé«˜åº¦æ˜¯çº¿æ®µåšåº¦ä¸€åŠçš„çŸ©å½¢åŒºåŸŸã€‚ lineJoin = type å…±æœ‰3ä¸ªå€¼round, bevel å’Œ miterï¼š round é€šè¿‡å¡«å……ä¸€ä¸ªé¢å¤–çš„ï¼Œåœ†å¿ƒåœ¨ç›¸è¿éƒ¨åˆ†æœ«ç«¯çš„æ‰‡å½¢ï¼Œç»˜åˆ¶æ‹è§’çš„å½¢çŠ¶ã€‚ åœ†è§’çš„åŠå¾„æ˜¯çº¿æ®µçš„å®½åº¦ã€‚ bevel åœ¨ç›¸è¿éƒ¨åˆ†çš„æœ«ç«¯å¡«å……ä¸€ä¸ªé¢å¤–çš„ä»¥ä¸‰è§’å½¢ä¸ºåº•çš„åŒºåŸŸï¼Œ æ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰å„è‡ªç‹¬ç«‹çš„çŸ©å½¢æ‹è§’ã€‚ miter (é»˜è®¤) é€šè¿‡å»¶ä¼¸ç›¸è¿éƒ¨åˆ†çš„å¤–è¾¹ç¼˜ï¼Œä½¿å…¶ç›¸äº¤äºä¸€ç‚¹ï¼Œå½¢æˆä¸€ä¸ªé¢å¤–çš„è±å½¢åŒºåŸŸã€‚ ç»˜åˆ¶è™šçº¿ç”¨ setLineDash æ–¹æ³•å’Œ lineDashOffsetå±æ€§æ¥åˆ¶å®šè™šçº¿æ ·å¼. setLineDash æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œæ¥æŒ‡å®šçº¿æ®µä¸é—´éš™çš„äº¤æ›¿ï¼›lineDashOffsetå±æ€§è®¾ç½®èµ·å§‹åç§»é‡ 12ctx.setLineDash([20, 5]); // [å®çº¿é•¿åº¦, é—´éš™é•¿åº¦]ctx.lineDashOffset = -0; ç»˜åˆ¶æ–‡æœ¬ ä¸¤ç§api fillText(text, x, y [, maxWidth]) åœ¨æŒ‡å®šçš„(x,y)ä½ç½®å¡«å……æŒ‡å®šçš„æ–‡æœ¬ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦æ˜¯å¯é€‰çš„. strokeText(text, x, y [, maxWidth]) åœ¨æŒ‡å®šçš„(x,y)ä½ç½®ç»˜åˆ¶æ–‡æœ¬è¾¹æ¡†ï¼Œç»˜åˆ¶çš„æœ€å¤§å®½åº¦æ˜¯å¯é€‰çš„. 123ctx.font = &quot;100px sans-serif&quot;ctx.fillText(&quot;å¤©è‹¥æœ‰æƒ…&quot;, 10, 100);ctx.strokeText(&quot;å¤©è‹¥æœ‰æƒ…&quot;, 10, 200); ç»™æ–‡æœ¬æ·»åŠ æ ·å¼ font = value å½“å‰æˆ‘ä»¬ç”¨æ¥ç»˜åˆ¶æ–‡æœ¬çš„æ ·å¼ã€‚è¿™ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨å’Œ CSS fontå±æ€§ç›¸åŒçš„è¯­æ³•. é»˜è®¤çš„å­—ä½“æ˜¯ 10px sans-serifã€‚ textAlign = value æ–‡æœ¬å¯¹é½é€‰é¡¹. å¯é€‰çš„å€¼åŒ…æ‹¬ï¼šstart, end, left, right or center. é»˜è®¤å€¼æ˜¯ startã€‚ textBaseline = value åŸºçº¿å¯¹é½é€‰é¡¹ï¼Œå¯é€‰çš„å€¼åŒ…æ‹¬ï¼štop, hanging, middle, alphabetic, ideographic, bottomã€‚é»˜è®¤å€¼æ˜¯ alphabeticã€‚ direction = value æ–‡æœ¬æ–¹å‘ã€‚å¯èƒ½çš„å€¼åŒ…æ‹¬ï¼šltr, rtl, inheritã€‚é»˜è®¤å€¼æ˜¯ inheritã€‚ ç»˜åˆ¶å›¾ç‰‡ jsé‡é›¶åˆ›å»ºå›¾ç‰‡ jsåˆ›å»ºæ–‡æœ¬ 12const img = new Image(); // åˆ›å»ºä¸€ä¸ª&lt;img&gt;å…ƒç´ img.src = &apos;myImage.png&apos;; // è®¾ç½®å›¾ç‰‡æºåœ°å€ ç„¶åå†ç»˜åˆ¶åˆ°canva 12//å‚æ•°1ï¼šè¦ç»˜åˆ¶çš„img å‚æ•°2ã€3ï¼šç»˜åˆ¶çš„imgåœ¨canvasä¸­çš„åæ ‡ctx.drawImage(img,0,0); æ³¨æ„ï¼š è€ƒè™‘åˆ°å›¾ç‰‡æ˜¯ä»ç½‘ç»œåŠ è½½ï¼Œå¦‚æœ drawImage çš„æ—¶å€™å›¾ç‰‡è¿˜æ²¡æœ‰å®Œå…¨åŠ è½½å®Œæˆï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼Œä¸ªåˆ«æµè§ˆå™¨ä¼šæŠ›å¼‚å¸¸ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä¿è¯åœ¨ img ç»˜åˆ¶å®Œæˆä¹‹åå†drawImageã€‚ 12345const img = new Image(); // åˆ›å»ºimgå…ƒç´ img.onload = function()&#123; ctx.drawImage(img, 0, 0)&#125;img.src = 'myImage.png'; // è®¾ç½®å›¾ç‰‡æºåœ°å€ ç»˜åˆ¶ img æ ‡ç­¾å…ƒç´ ä¸­çš„å›¾ç‰‡ 12var img = document.querySelector("img");ctx.drawImage(img, 0, 0); ç¼©æ”¾å›¾ç‰‡ drawImage() ä¹Ÿå¯ä»¥å†æ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼š drawImage(image, x, y, width, height) è¿™ä¸ªæ–¹æ³•å¤šäº†2ä¸ªå‚æ•°ï¼šwidth å’Œ heightï¼Œè¿™ä¸¤ä¸ªå‚æ•°ç”¨æ¥æ§åˆ¶ å½“åƒcanvasç”»å…¥æ—¶åº”è¯¥ç¼©æ”¾çš„å¤§å°ã€‚ 12// å‚æ•°1ï¼šè¦ç»˜åˆ¶çš„img å‚æ•°2ã€3ï¼šç»˜åˆ¶çš„imgåœ¨canvasä¸­çš„åæ ‡ å‚æ•°4ã€5ç”»å…¥æ—¶åº”è¯¥ç¼©æ”¾çš„å¤§å°ã€‚ctx.drawImage(img, 0, 0, 400, 200); åˆ‡ç‰‡ drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight) ç¬¬ä¸€ä¸ªå‚æ•°å’Œå…¶å®ƒçš„æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ä¸€ä¸ªå›¾åƒæˆ–è€…å¦ä¸€ä¸ª canvas çš„å¼•ç”¨ã€‚ å…¶ä»–8ä¸ªå‚æ•°ï¼š å‰4ä¸ªæ˜¯å®šä¹‰å›¾åƒæºçš„åˆ‡ç‰‡ä½ç½®å’Œå¤§å°ï¼Œ å4ä¸ªåˆ™æ˜¯å®šä¹‰åˆ‡ç‰‡çš„ç›®æ ‡æ˜¾ç¤ºä½ç½®å’Œå¤§å°ã€‚]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>åŸç”Ÿjs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Event Busçš„å®ç°]]></title>
    <url>%2F2018%2F06%2F15%2FeventBus%2F</url>
    <content type="text"><![CDATA[Event Busçš„å®ç° å‰è¨€Event Bus ä½¿ç”¨çš„èŒƒå›´ä¹Ÿå¾ˆå¹¿æ³›ã€‚ react vue éçˆ¶å­ç»„ä»¶å°±ç»å¸¸ç”¨Event Busè¿›è¡Œé€šä¿¡ã€‚ Node.js ä¸­çš„å¾ˆå¤šæ¨¡å—éƒ½ä¾èµ–Eventã€‚ å®ç°æ€è·¯ Event Busæ˜¯ å‘å¸ƒè®¢é˜…æ¨¡å¼ çš„å…¸å‹åº”ç”¨ã€‚ è¿™é‡Œå®ç°ä½¿ç”¨ ES6 è¯­æ³•ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š 12345678910// æ³¨å†Œä¸€ä¸ªEvent Busconst emitter = new EventEmeitter()// å¢åŠ ç›‘å¬äº‹ä»¶emitter.on(&apos;test&apos;, a =&gt; &#123; console.log(`on: $&#123;a&#125;`)&#125;)// è§¦å‘äº‹ä»¶emitter.emit(&apos;test&apos;, &apos;a=10&apos;) å‡†å¤‡å·¥ä½œ åˆ›å»ºä¸€ä¸ª EventEmeitter ç±»ã€‚ å‚æ•° maxListeners æ˜¯ ç›‘å¬è€… æœ€å¤šèƒ½ç®€å•å¤šå°‘ä¸ªäº‹ä»¶ã€‚ _events åˆ™æ˜¯ å­˜å‚¨äº‹ä»¶ çš„æ•°æ®ç»“æ„ã€‚ 1234constructor(maxListeners) &#123; this._events = new Map() this._maxListeners = (maxListeners &amp;&amp; maxListeners &gt; 0) ? maxListeners : 10&#125; 1. å­˜å‚¨äº‹ä»¶ emitter.on(type, fn) å¢åŠ ç›‘å¬äº‹ä»¶çš„æ—¶å€™ï¼Œå¿…éœ€è¦å‚¨å­˜ type å¯¹åº”çš„äº‹ä»¶ã€‚ typeå¯¹åº”çš„ äº‹ä»¶(fn) å¯èƒ½æ˜¯æœ‰å¤šä¸ªçš„ã€‚ æ‰€ä»¥åº”è¯¥ä½¿ç”¨key: valueçš„æ–¹å¼å»å­˜å‚¨ã€‚ç¬¬ä¸€æ—¶é—´å¯èƒ½æƒ³åˆ°çš„æ˜¯ å¯¹è±¡Objectã€‚è¿™é‡Œä½¿ç”¨ES6æ–°å¢çš„ Map ä½œä¸ºå­˜å‚¨ç»“æ„ã€‚Mapç”¨æ³•ä¼ é€é—¨ é‚£ä¹ˆ Map çš„ key å°±æ˜¯ typeï¼Œvalue åˆ™æ˜¯ æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢å­˜çš„æ˜¯éœ€è¦è§¦å‘çš„ å‡½æ•° ã€‚ 123456789on(type, fn) &#123; const typeFnList = this._events.get(type) if (typeFnList) &#123; if (typeFnList.length &gt;= this._maxListeners) return typeFnList.push(fn) &#125; else &#123; this._events.set(type, [fn]) &#125;&#125; 2. è§¦å‘äº‹ä»¶ emitter.emit(type, ...args) ç°åœ¨ä¸Šé¢æ‰€è¿°çš„ Map ä¸­æ‰¾å‡º type æ‰€å¯¹åº”çš„ å‡½æ•°çš„æ•°ç»„ ã€‚ å†éå†æ•°ç»„ï¼Œæ‰§è¡Œæ•°ç»„é‡Œé¢æ‰€æœ‰çš„å‡½æ•°ã€‚ è§¦å‘ç›‘å¬å‡½æ•°æˆ‘ä»¬å¯ä»¥ç”¨ apply ä¸ call ä¸¤ç§æ–¹æ³•ï¼Œåœ¨å°‘æ•°å‚æ•°æ—¶callçš„æ€§èƒ½æ›´å¥½,å¤šä¸ªå‚æ•°æ—¶applyæ€§èƒ½æ›´å¥½ï¼Œå½“å¹´Nodeçš„Eventæ¨¡å—å°±åœ¨ä¸‰ä¸ªå‚æ•°ä»¥ä¸‹ç”¨callå¦åˆ™ç”¨ applyã€‚ 1234emit(type, ...args) &#123; const typeFnList = this._events.get(type) typeFnList &amp;&amp; typeFnList.forEach(fn =&gt; fn.apply(this, args))&#125; 3. ç§»é™¤äº‹ä»¶ emitter.remove(type, fn)åŒ¿åå‡½æ•°ä¸èƒ½ç§»é™¤ï¼Œå› ä¸ºæ‰¾ä¸åˆ°å¯¹åº”çš„å†…å­˜ã€‚ æ‰¾å‡º type å¯¹åº”çš„æ•°ç»„ã€‚ æŸ¥åˆ°å‡ºå¯¹åº”å†…å­˜çš„fnï¼Œå¹¶ä»æ•°ç»„åˆ é™¤ã€‚ 123456remove(type, fn) &#123; const typeFnList = this._events.get(type) if (typeFnList &amp;&amp; typeFnList.includes(fn)) &#123; typeFnList.splice(typeFnList.findIndex(e =&gt; e === fn), 1) &#125;&#125; æ€»ç»“å¯¹Event Busçš„åŸç†æ›´åŠ äº†è§£ã€‚ å®Œæ•´çš„demoåœ¨è¿™]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>åŸç”Ÿjs</tag>
        <tag>é€ è½®å­</tag>
      </tags>
  </entry>
</search>
